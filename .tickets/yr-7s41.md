---
id: yr-7s41
status: closed
deps: []
links: []
created: 2026-02-11T13:11:50Z
type: task
priority: 0
assignee: Gennady Evstratov
parent: yr-53vp
---
# Hang: Triage playbook + repro harness

Create a deterministic debugging workflow for yolo-agent hangs.

Deliverables:
- A short runbook doc (e.g. docs/hang-triage.md) that explains:
  - How to reproduce a hang with yolo-agent (with and without --stream).
  - Where logs live (runner-logs/agent.events.jsonl, runner-logs/opencode/<task>.{jsonl,stderr.log}, and per-task clone paths).
  - How to localize the hang boundary using events:
    - stuck before runner_started => tracker/scheduler/VCS/clone.
    - stuck after runner_started => opencode/ACP lifecycle or permission/question.
  - What to grep for in opencode stderr (session.prompt exiting loop, session.idle, service=permission, service=question).
  - A minimal checklist of next actions (set --runner-timeout, inspect tail, classify category).

Optional: add a tiny docs test that asserts the runbook mentions the key log paths + flags.

## Acceptance Criteria

Given a fresh clone,
when following the runbook steps,
then I can reliably identify whether the hang is in scheduler/task selection vs runner/opencode.

Given a hang report,
when I inspect the referenced log paths,
then I can classify it as one of: idle-transport-open, permission/question prompt, no-output stall, or other.


## Notes

**2026-02-11T13:39:18Z**

Completed: added docs/hang-triage.md and internal/docs/hang_runbook_test.go for deterministic hang triage workflow.
