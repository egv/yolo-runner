{"type":"step_start","timestamp":1768841568291,"sessionID":"ses_428d3a351ffey4Uy5GHqwPlnuM","part":{"id":"prt_bd72c6022001XkUygmHdqw13Wl","sessionID":"ses_428d3a351ffey4Uy5GHqwPlnuM","messageID":"msg_bd72c5d78001qlvv0Bn4lZxC2L","type":"step-start","snapshot":"9639d641f403cdcd5c4b0ac2084d8e89f142a384"}}
{"type":"tool_use","timestamp":1768841570525,"sessionID":"ses_428d3a351ffey4Uy5GHqwPlnuM","part":{"id":"prt_bd72c6760001Pr5OS10naVdn4f","sessionID":"ses_428d3a351ffey4Uy5GHqwPlnuM","messageID":"msg_bd72c5d78001qlvv0Bn4lZxC2L","type":"tool","callID":"call_wyQVVlsR3BjiN4ll9tUujP7Y","tool":"glob","state":{"status":"completed","input":{"pattern":"README.md","path":"/Users/egv/dev/yolo-runner"},"output":"/Users/egv/dev/yolo-runner/README.md\n/Users/egv/dev/yolo-runner/.beads/README.md","title":"","metadata":{"count":2,"truncated":false},"time":{"start":1768841570517,"end":1768841570524}},"metadata":{"openai":{"itemId":"fc_07b0dec523265e4901696e616222e4819191fed5e14d1d9e40"}}}}
{"type":"step_finish","timestamp":1768841570546,"sessionID":"ses_428d3a351ffey4Uy5GHqwPlnuM","part":{"id":"prt_bd72c68e4001r0HG8Vz3f3atSC","sessionID":"ses_428d3a351ffey4Uy5GHqwPlnuM","messageID":"msg_bd72c5d78001qlvv0Bn4lZxC2L","type":"step-finish","reason":"tool-calls","snapshot":"ab8770a75318569942d08e8f33dd79e756aff64b","cost":0,"tokens":{"input":609,"output":33,"reasoning":0,"cache":{"read":8832,"write":0}}}}
{"type":"step_start","timestamp":1768841570872,"sessionID":"ses_428d3a351ffey4Uy5GHqwPlnuM","part":{"id":"prt_bd72c6a38001gXwcSBWTvQuUDk","sessionID":"ses_428d3a351ffey4Uy5GHqwPlnuM","messageID":"msg_bd72c68ff001SYtIZyIOdrfZg1","type":"step-start","snapshot":"61fdf767c9758a99aac74a1736510605ea11a023"}}
{"type":"tool_use","timestamp":1768841572432,"sessionID":"ses_428d3a351ffey4Uy5GHqwPlnuM","part":{"id":"prt_bd72c6c7d001H4Ox9kkOoB2BOd","sessionID":"ses_428d3a351ffey4Uy5GHqwPlnuM","messageID":"msg_bd72c68ff001SYtIZyIOdrfZg1","type":"tool","callID":"call_10SedoK6RTAqkM9uTIMFLYeq","tool":"read","state":{"status":"completed","input":{"filePath":"/Users/egv/dev/yolo-runner/README.md"},"output":"<file>\n00001| # Yolo Runner\n00002| \n00003| Runs OpenCode in YOLO mode against a single bead task at a time. The runner owns task selection, status updates, and logging; the agent only executes the task it is given.\n00004| \n00005| ## Location\n00006| \n00007| - Canonical script: `tools/yolo-runner/beads_yolo_runner.py`\n00008| - Compatibility copy (in-use by existing invocations): `scripts/beads_yolo_runner.py`\n00009| \n00010| ## What It Does\n00011| \n00012| - Selects the next open leaf task using beads (`bd ready`).\n00013| - Builds a task prompt with title, description, and acceptance criteria.\n00014| - Runs OpenCode with the YOLO agent using a single prompt.\n00015| - Captures OpenCode JSON output to a per-task log file.\n00016| - Commits changes, closes the bead, verifies it is closed, then runs `bd sync`.\n00017| - If no code changes were produced, marks the task as `blocked` and exits.\n00018| \n00019| ## Requirements\n00020| \n00021| - `bd` (beads) CLI available and initialized.\n00022| - `opencode` CLI available.\n00023| - `git` installed and repo cloned.\n00024| - `uv` installed for the Python runner (bootstrap only).\n00025| - Go 1.21+ for building the runner.\n00026| \n00027| ## Build\n00028| \n00029| From repo root:\n00030| \n00031| ```\n00032| make build\n00033| ```\n00034| \n00035| ## Test\n00036| \n00037| ```\n00038| make test\n00039| ```\n00040| \n00041| ## Run\n00042| \n00043| From repo root:\n00044| \n00045| ```\n00046| ./bin/yolo-runner --repo . --root algi-8bt --model gpt-4o\n00047| ./bin/yolo-runner --repo . --root algi-8bt --dry-run\n00048| ```\n00049| \n00050| Common options:\n00051| - `--max N` limit number of tasks processed\n00052| - `--dry-run` print the task prompt without running OpenCode\n00053| \n00054| ## Task Prompt\n00055| \n00056| The prompt includes:\n00057| - Bead ID and title\n00058| - Description\n00059| - Acceptance criteria\n00060| - Strict TDD rules\n00061| \n00062| The YOLO agent must only work on the prompt provided. It must not call beads commands.\n00063| \n00064| ## Logging\n00065| \n00066| - Runner summary log: `runner-logs/beads_yolo_runner.jsonl`\n00067| - Per-task OpenCode logs: `runner-logs/opencode/<issue-id>.jsonl`\n00068| \n00069| ## OpenCode Config Isolation\n00070| \n00071| The runner sets `XDG_CONFIG_HOME=~/.config/opencode-runner` so OpenCode reads and writes config in an isolated directory instead of your default `~/.config/opencode`.\n00072| \n00073| If flags are added later to change the config location, use those to override the default. Otherwise inspect the effective config by checking `~/.config/opencode-runner` directly or exporting a different `XDG_CONFIG_HOME` before running the binary.\n00074| \n00075| ## Manual Smoke Test\n00076| \n00077| Use a throwaway branch or a fresh worktree so the run-once flow can safely create a commit and update beads.\n00078| \n00079| 1. Create a throwaway branch (or worktree) and ensure the repo is clean.\n00080| 2. Run `bd ready` and confirm the selected bead is the one you want to exercise end-to-end.\n00081| 3. Run the runner once, for example: `./bin/yolo-runner --repo . --root <root-id> --max 1`.\n00082| 4. Inspect the resulting commit and confirm it only includes the expected changes for the bead.\n00083| 5. Review the logs at `runner-logs/beads_yolo_runner.jsonl` and `runner-logs/opencode/<issue-id>.jsonl` to confirm the run-once flow completed.\n00084| \n00085| Success looks like: the runner finishes without errors, a single commit exists for the bead, the bead is closed and synced, and the logs show a complete OpenCode run with a recorded commit and `bd close`/`bd sync` steps.\n00086| \n00087| ## Failure Modes\n00088| \n00089| - **No changes after OpenCode run**: task is marked `blocked`; no commit or close.\n00090| - **Commit fails**: runner exits with the git error; task remains in progress.\n00091| - **OpenCode fails**: runner exits with the OpenCode error code.\n00092| \n00093| ## Notes\n00094| \n00095| - OpenCode is run in CI mode to avoid interactive prompts.\n00096| - The runner is responsible for `bd close` and `bd sync` after a successful commit.\n00097| \n\n(End of file - total 97 lines)\n</file>","title":"README.md","metadata":{"preview":"# Yolo Runner\n\nRuns OpenCode in YOLO mode against a single bead task at a time. The runner owns task selection, status updates, and logging; the agent only executes the task it is given.\n\n## Location\n\n- Canonical script: `tools/yolo-runner/beads_yolo_runner.py`\n- Compatibility copy (in-use by existing invocations): `scripts/beads_yolo_runner.py`\n\n## What It Does\n\n- Selects the next open leaf task using beads (`bd ready`).\n- Builds a task prompt with title, description, and acceptance criteria.\n- Runs OpenCode with the YOLO agent using a single prompt.\n- Captures OpenCode JSON output to a per-task log file.\n- Commits changes, closes the bead, verifies it is closed, then runs `bd sync`.\n- If no code changes were produced, marks the task as `blocked` and exits.\n\n## Requirements\n","truncated":false},"time":{"start":1768841572430,"end":1768841572432}},"metadata":{"openai":{"itemId":"fc_05f67b7434b9d12901696e616373608191bc23139fce83e1c7"}}}}
{"type":"step_finish","timestamp":1768841572745,"sessionID":"ses_428d3a351ffey4Uy5GHqwPlnuM","part":{"id":"prt_bd72c717a001hvXyihtaowMv96","sessionID":"ses_428d3a351ffey4Uy5GHqwPlnuM","messageID":"msg_bd72c68ff001SYtIZyIOdrfZg1","type":"step-finish","reason":"tool-calls","snapshot":"959860b2ec39c8876dbf969dde3f328b2de27e18","cost":0,"tokens":{"input":165,"output":30,"reasoning":0,"cache":{"read":9344,"write":0}}}}
{"type":"step_start","timestamp":1768841573296,"sessionID":"ses_428d3a351ffey4Uy5GHqwPlnuM","part":{"id":"prt_bd72c73b0001BtHXlW9G1yvYs1","sessionID":"ses_428d3a351ffey4Uy5GHqwPlnuM","messageID":"msg_bd72c71980018iHWsrIQpcJyy2","type":"step-start","snapshot":"9b4ae5a7b71d4d2dc34c5907e3c79417e1dc4c9b"}}
{"type":"tool_use","timestamp":1768841576492,"sessionID":"ses_428d3a351ffey4Uy5GHqwPlnuM","part":{"id":"prt_bd72c7dab001ciK4ZP5w6tBhTr","sessionID":"ses_428d3a351ffey4Uy5GHqwPlnuM","messageID":"msg_bd72c71980018iHWsrIQpcJyy2","type":"tool","callID":"call_IM1nnZXWrU0DmRwHdn4HC453","tool":"glob","state":{"status":"completed","input":{"pattern":"**/*_test.go","path":"/Users/egv/dev/yolo-runner"},"output":"/Users/egv/dev/yolo-runner/internal/ui/tui/logwatch_test.go\n/Users/egv/dev/yolo-runner/cmd/yolo-runner/main_test.go\n/Users/egv/dev/yolo-runner/internal/runner/runner_test.go\n/Users/egv/dev/yolo-runner/internal/runner/runner_watchdog_test.go\n/Users/egv/dev/yolo-runner/internal/ui/tui/model_test.go\n/Users/egv/dev/yolo-runner/bubbletea_test.go\n/Users/egv/dev/yolo-runner/build_docs_test.go\n/Users/egv/dev/yolo-runner/cmd/yolo-runner/exec_test.go\n/Users/egv/dev/yolo-runner/internal/beads/beads_test.go\n/Users/egv/dev/yolo-runner/internal/opencode/client_test.go\n/Users/egv/dev/yolo-runner/internal/opencode/watchdog_test.go\n/Users/egv/dev/yolo-runner/internal/runner/loop_test.go\n/Users/egv/dev/yolo-runner/internal/prompt/prompt_test.go\n/Users/egv/dev/yolo-runner/internal/logging/jsonl_test.go\n/Users/egv/dev/yolo-runner/internal/vcs/git/git_test.go\n/Users/egv/dev/yolo-runner/internal/runner/select_test.go\n/Users/egv/dev/yolo-runner/runner_logging_v1_test.go\n/Users/egv/dev/yolo-runner/opencode_adapter_v1_test.go","title":"","metadata":{"count":18,"truncated":false},"time":{"start":1768841576484,"end":1768841576492}},"metadata":{"openai":{"itemId":"fc_050599c2d798b99a01696e6167d88881919e5eafbc03f84597"}}}}
{"type":"step_finish","timestamp":1768841576638,"sessionID":"ses_428d3a351ffey4Uy5GHqwPlnuM","part":{"id":"prt_bd72c80b2001m0gLSq0o6A7UmE","sessionID":"ses_428d3a351ffey4Uy5GHqwPlnuM","messageID":"msg_bd72c71980018iHWsrIQpcJyy2","type":"step-finish","reason":"tool-calls","snapshot":"d876ca7377d77bfa22b145cea69c4fad18f14b33","cost":0,"tokens":{"input":1381,"output":100,"reasoning":64,"cache":{"read":9344,"write":0}}}}
{"type":"step_start","timestamp":1768841577058,"sessionID":"ses_428d3a351ffey4Uy5GHqwPlnuM","part":{"id":"prt_bd72c82620015NGFlAShA5KQ55","sessionID":"ses_428d3a351ffey4Uy5GHqwPlnuM","messageID":"msg_bd72c80cb001BylxXJWaD4mDjE","type":"step-start","snapshot":"d696bc78f9b350456eab617be2542d1e747d0211"}}
{"type":"tool_use","timestamp":1768841579286,"sessionID":"ses_428d3a351ffey4Uy5GHqwPlnuM","part":{"id":"prt_bd72c88e8001bpQJsPev3ixx9v","sessionID":"ses_428d3a351ffey4Uy5GHqwPlnuM","messageID":"msg_bd72c80cb001BylxXJWaD4mDjE","type":"tool","callID":"call_1VDpWiUGwGjGr6UYNETKh4x5","tool":"read","state":{"status":"completed","input":{"filePath":"/Users/egv/dev/yolo-runner/build_docs_test.go"},"output":"<file>\n00001| package yolo_runner\n00002| \n00003| import (\n00004| \t\"os\"\n00005| \t\"regexp\"\n00006| \t\"strings\"\n00007| \t\"testing\"\n00008| )\n00009| \n00010| func TestMakefileTargets(t *testing.T) {\n00011| \tcontent, err := os.ReadFile(\"Makefile\")\n00012| \tif err != nil {\n00013| \t\tt.Fatalf(\"expected Makefile to exist: %v\", err)\n00014| \t}\n00015| \n00016| \tmakefile := string(content)\n00017| \tif !regexp.MustCompile(`(?m)^test:\\n\\tgo test \\./\\.\\.\\.`).MatchString(makefile) {\n00018| \t\tt.Fatalf(\"expected make test to run go test ./...\\nMakefile:\\n%s\", makefile)\n00019| \t}\n00020| \tif !regexp.MustCompile(`(?m)^build:(?:\\n\\t.*)*\\n\\tgo build .*bin/yolo-runner`).MatchString(makefile) {\n00021| \t\tt.Fatalf(\"expected make build to build bin/yolo-runner\\nMakefile:\\n%s\", makefile)\n00022| \t}\n00023| }\n00024| \n00025| func TestReadmeDocumentsBuildAndUsage(t *testing.T) {\n00026| \tcontent, err := os.ReadFile(\"README.md\")\n00027| \tif err != nil {\n00028| \t\tt.Fatalf(\"expected README.md to exist: %v\", err)\n00029| \t}\n00030| \n00031| \treadme := string(content)\n00032| \trequirements := []string{\"bd\", \"opencode\", \"git\", \"uv\"}\n00033| \tfor _, requirement := range requirements {\n00034| \t\tif !strings.Contains(readme, requirement) {\n00035| \t\t\tt.Fatalf(\"expected README to mention %q\", requirement)\n00036| \t\t}\n00037| \t}\n00038| \n00039| \texamples := []string{\"--model\", \"--dry-run\"}\n00040| \tfor _, example := range examples {\n00041| \t\tif !strings.Contains(readme, example) {\n00042| \t\t\tt.Fatalf(\"expected README to include example with %q\", example)\n00043| \t\t}\n00044| \t}\n00045| }\n00046| \n00047| func TestReadmeDocumentsOpenCodeConfigIsolation(t *testing.T) {\n00048| \tcontent, err := os.ReadFile(\"README.md\")\n00049| \tif err != nil {\n00050| \t\tt.Fatalf(\"expected README.md to exist: %v\", err)\n00051| \t}\n00052| \n00053| \treadme := string(content)\n00054| \trequirements := []string{\n00055| \t\t\"XDG_CONFIG_HOME=~/.config/opencode-runner\",\n00056| \t\t\"override\",\n00057| \t\t\"inspect\",\n00058| \t}\n00059| \tfor _, requirement := range requirements {\n00060| \t\tif !strings.Contains(readme, requirement) {\n00061| \t\t\tt.Fatalf(\"expected README to mention %q\", requirement)\n00062| \t\t}\n00063| \t}\n00064| }\n00065| \n00066| func TestReadmeDocumentsSmokeTest(t *testing.T) {\n00067| \tcontent, err := os.ReadFile(\"README.md\")\n00068| \tif err != nil {\n00069| \t\tt.Fatalf(\"expected README.md to exist: %v\", err)\n00070| \t}\n00071| \n00072| \treadme := string(content)\n00073| \trequiredPhrases := []string{\n00074| \t\t\"Manual Smoke Test\",\n00075| \t\t\"throwaway branch\",\n00076| \t\t\"worktree\",\n00077| \t\t\"`bd ready`\",\n00078| \t\t\"runner-logs/beads_yolo_runner.jsonl\",\n00079| \t\t\"runner-logs/opencode/\",\n00080| \t\t\"Success looks like\",\n00081| \t}\n00082| \tfor _, phrase := range requiredPhrases {\n00083| \t\tif !strings.Contains(readme, phrase) {\n00084| \t\t\tt.Fatalf(\"expected README smoke test instructions to mention %q\", phrase)\n00085| \t\t}\n00086| \t}\n00087| \n00088| \tif !regexp.MustCompile(`(?i)inspect.*commit`).MatchString(readme) {\n00089| \t\tt.Fatalf(\"expected README smoke test instructions to mention inspecting the resulting commit\")\n00090| \t}\n00091| }\n00092| \n\n(End of file - total 92 lines)\n</file>","title":"build_docs_test.go","metadata":{"preview":"package yolo_runner\n\nimport (\n\t\"os\"\n\t\"regexp\"\n\t\"strings\"\n\t\"testing\"\n)\n\nfunc TestMakefileTargets(t *testing.T) {\n\tcontent, err := os.ReadFile(\"Makefile\")\n\tif err != nil {\n\t\tt.Fatalf(\"expected Makefile to exist: %v\", err)\n\t}\n\n\tmakefile := string(content)\n\tif !regexp.MustCompile(`(?m)^test:\\n\\tgo test \\./\\.\\.\\.`).MatchString(makefile) {\n\t\tt.Fatalf(\"expected make test to run go test ./...\\nMakefile:\\n%s\", makefile)\n\t}\n\tif !regexp.MustCompile(`(?m)^build:(?:\\n\\t.*)*\\n\\tgo build .*bin/yolo-runner`).MatchString(makefile) {","truncated":false},"time":{"start":1768841579285,"end":1768841579286}},"metadata":{"openai":{"itemId":"fc_0c58a5566b12b21101696e616ab88881918f5d88e4417dc843"}}}}
{"type":"step_finish","timestamp":1768841579387,"sessionID":"ses_428d3a351ffey4Uy5GHqwPlnuM","part":{"id":"prt_bd72c8b6b001vME0vvSO7Pp8Lj","sessionID":"ses_428d3a351ffey4Uy5GHqwPlnuM","messageID":"msg_bd72c80cb001BylxXJWaD4mDjE","type":"step-finish","reason":"tool-calls","snapshot":"2fd89c50d8a4f07dc3c1c5dd536dd6a0b4df7901","cost":0,"tokens":{"input":1234,"output":31,"reasoning":0,"cache":{"read":9856,"write":0}}}}
{"type":"step_start","timestamp":1768841579783,"sessionID":"ses_428d3a351ffey4Uy5GHqwPlnuM","part":{"id":"prt_bd72c8d07001wzrBvKqrmaTCHW","sessionID":"ses_428d3a351ffey4Uy5GHqwPlnuM","messageID":"msg_bd72c8b88001UcvGSLKZ8Hm0kz","type":"step-start","snapshot":"1d5187cd580dec6e9adc02004c8f24ea687827a4"}}
{"type":"tool_use","timestamp":1768841596555,"sessionID":"ses_428d3a351ffey4Uy5GHqwPlnuM","part":{"id":"prt_bd72c9fb3001JoX6Jz5OG6lKnM","sessionID":"ses_428d3a351ffey4Uy5GHqwPlnuM","messageID":"msg_bd72c8b88001UcvGSLKZ8Hm0kz","type":"tool","callID":"call_yLnx3Xey1mVQPe2iuCrGLpRV","tool":"edit","state":{"status":"completed","input":{"filePath":"/Users/egv/dev/yolo-runner/build_docs_test.go","oldString":"func TestReadmeDocumentsSmokeTest(t *testing.T) {\n\tcontent, err := os.ReadFile(\"README.md\")\n\tif err != nil {\n\t\tt.Fatalf(\"expected README.md to exist: %v\", err)\n\t}\n\n\treadme := string(content)\n\trequiredPhrases := []string{\n\t\t\"Manual Smoke Test\",\n\t\t\"throwaway branch\",\n\t\t\"worktree\",\n\t\t\"`bd ready`\",\n\t\t\"runner-logs/beads_yolo_runner.jsonl\",\n\t\t\"runner-logs/opencode/\",\n\t\t\"Success looks like\",\n\t}\n\tfor _, phrase := range requiredPhrases {\n\t\tif !strings.Contains(readme, phrase) {\n\t\t\tt.Fatalf(\"expected README smoke test instructions to mention %q\", phrase)\n\t\t}\n\t}\n\n\tif !regexp.MustCompile(`(?i)inspect.*commit`).MatchString(readme) {\n\t\tt.Fatalf(\"expected README smoke test instructions to mention inspecting the resulting commit\")\n\t}\n}\n","newString":"func TestReadmeDocumentsSmokeTest(t *testing.T) {\n\tcontent, err := os.ReadFile(\"README.md\")\n\tif err != nil {\n\t\tt.Fatalf(\"expected README.md to exist: %v\", err)\n\t}\n\n\treadme := string(content)\n\trequiredPhrases := []string{\n\t\t\"Manual Smoke Test\",\n\t\t\"throwaway branch\",\n\t\t\"worktree\",\n\t\t\"`bd ready`\",\n\t\t\"runner-logs/beads_yolo_runner.jsonl\",\n\t\t\"runner-logs/opencode/\",\n\t\t\"Success looks like\",\n\t}\n\tfor _, phrase := range requiredPhrases {\n\t\tif !strings.Contains(readme, phrase) {\n\t\t\tt.Fatalf(\"expected README smoke test instructions to mention %q\", phrase)\n\t\t}\n\t}\n\n\tif !regexp.MustCompile(`(?i)inspect.*commit`).MatchString(readme) {\n\t\tt.Fatalf(\"expected README smoke test instructions to mention inspecting the resulting commit\")\n\t}\n}\n\nfunc TestReadmeDocumentsTUIAndHeadless(t *testing.T) {\n\tcontent, err := os.ReadFile(\"README.md\")\n\tif err != nil {\n\t\tt.Fatalf(\"expected README.md to exist: %v\", err)\n\t}\n\n\treadme := string(content)\n\trequiredPhrases := []string{\n\t\t\"TUI\",\n\t\t\"TTY\",\n\t\t\"--headless\",\n\t}\n\tfor _, phrase := range requiredPhrases {\n\t\tif !strings.Contains(readme, phrase) {\n\t\t\tt.Fatalf(\"expected README to mention %q\", phrase)\n\t\t}\n\t}\n\n\tif !regexp.MustCompile(`(?i)default.*tui`).MatchString(readme) {\n\t\tt.Fatalf(\"expected README to describe the default TUI behavior\")\n\t}\n\tif !regexp.MustCompile(`(?i)headless`).MatchString(readme) {\n\t\tt.Fatalf(\"expected README to describe the headless mode\")\n\t}\n}\n"},"output":"Edit applied successfully.","title":"build_docs_test.go","metadata":{"diagnostics":{"/Users/egv/dev/yolo-runner/build_docs_test.go":[],"/Users/egv/dev/yolo-runner/go.mod":[{"range":{"start":{"line":6,"character":44},"end":{"line":6,"character":55}},"severity":2,"source":"go mod tidy","message":"github.com/charmbracelet/bubbletea should be direct"},{"range":{"start":{"line":19,"character":26},"end":{"line":19,"character":37}},"severity":2,"source":"go mod tidy","message":"golang.org/x/term should be direct"}],"/Users/egv/dev/yolo-runner/opencode_adapter_v1.go":[]},"diff":"Index: /Users/egv/dev/yolo-runner/build_docs_test.go\n===================================================================\n--- /Users/egv/dev/yolo-runner/build_docs_test.go\n+++ /Users/egv/dev/yolo-runner/build_docs_test.go\n@@ -88,4 +88,30 @@\n \tif !regexp.MustCompile(`(?i)inspect.*commit`).MatchString(readme) {\n \t\tt.Fatalf(\"expected README smoke test instructions to mention inspecting the resulting commit\")\n \t}\n }\n+\n+func TestReadmeDocumentsTUIAndHeadless(t *testing.T) {\n+\tcontent, err := os.ReadFile(\"README.md\")\n+\tif err != nil {\n+\t\tt.Fatalf(\"expected README.md to exist: %v\", err)\n+\t}\n+\n+\treadme := string(content)\n+\trequiredPhrases := []string{\n+\t\t\"TUI\",\n+\t\t\"TTY\",\n+\t\t\"--headless\",\n+\t}\n+\tfor _, phrase := range requiredPhrases {\n+\t\tif !strings.Contains(readme, phrase) {\n+\t\t\tt.Fatalf(\"expected README to mention %q\", phrase)\n+\t\t}\n+\t}\n+\n+\tif !regexp.MustCompile(`(?i)default.*tui`).MatchString(readme) {\n+\t\tt.Fatalf(\"expected README to describe the default TUI behavior\")\n+\t}\n+\tif !regexp.MustCompile(`(?i)headless`).MatchString(readme) {\n+\t\tt.Fatalf(\"expected README to describe the headless mode\")\n+\t}\n+}\n","filediff":{"file":"/Users/egv/dev/yolo-runner/build_docs_test.go","before":"package yolo_runner\n\nimport (\n\t\"os\"\n\t\"regexp\"\n\t\"strings\"\n\t\"testing\"\n)\n\nfunc TestMakefileTargets(t *testing.T) {\n\tcontent, err := os.ReadFile(\"Makefile\")\n\tif err != nil {\n\t\tt.Fatalf(\"expected Makefile to exist: %v\", err)\n\t}\n\n\tmakefile := string(content)\n\tif !regexp.MustCompile(`(?m)^test:\\n\\tgo test \\./\\.\\.\\.`).MatchString(makefile) {\n\t\tt.Fatalf(\"expected make test to run go test ./...\\nMakefile:\\n%s\", makefile)\n\t}\n\tif !regexp.MustCompile(`(?m)^build:(?:\\n\\t.*)*\\n\\tgo build .*bin/yolo-runner`).MatchString(makefile) {\n\t\tt.Fatalf(\"expected make build to build bin/yolo-runner\\nMakefile:\\n%s\", makefile)\n\t}\n}\n\nfunc TestReadmeDocumentsBuildAndUsage(t *testing.T) {\n\tcontent, err := os.ReadFile(\"README.md\")\n\tif err != nil {\n\t\tt.Fatalf(\"expected README.md to exist: %v\", err)\n\t}\n\n\treadme := string(content)\n\trequirements := []string{\"bd\", \"opencode\", \"git\", \"uv\"}\n\tfor _, requirement := range requirements {\n\t\tif !strings.Contains(readme, requirement) {\n\t\t\tt.Fatalf(\"expected README to mention %q\", requirement)\n\t\t}\n\t}\n\n\texamples := []string{\"--model\", \"--dry-run\"}\n\tfor _, example := range examples {\n\t\tif !strings.Contains(readme, example) {\n\t\t\tt.Fatalf(\"expected README to include example with %q\", example)\n\t\t}\n\t}\n}\n\nfunc TestReadmeDocumentsOpenCodeConfigIsolation(t *testing.T) {\n\tcontent, err := os.ReadFile(\"README.md\")\n\tif err != nil {\n\t\tt.Fatalf(\"expected README.md to exist: %v\", err)\n\t}\n\n\treadme := string(content)\n\trequirements := []string{\n\t\t\"XDG_CONFIG_HOME=~/.config/opencode-runner\",\n\t\t\"override\",\n\t\t\"inspect\",\n\t}\n\tfor _, requirement := range requirements {\n\t\tif !strings.Contains(readme, requirement) {\n\t\t\tt.Fatalf(\"expected README to mention %q\", requirement)\n\t\t}\n\t}\n}\n\nfunc TestReadmeDocumentsSmokeTest(t *testing.T) {\n\tcontent, err := os.ReadFile(\"README.md\")\n\tif err != nil {\n\t\tt.Fatalf(\"expected README.md to exist: %v\", err)\n\t}\n\n\treadme := string(content)\n\trequiredPhrases := []string{\n\t\t\"Manual Smoke Test\",\n\t\t\"throwaway branch\",\n\t\t\"worktree\",\n\t\t\"`bd ready`\",\n\t\t\"runner-logs/beads_yolo_runner.jsonl\",\n\t\t\"runner-logs/opencode/\",\n\t\t\"Success looks like\",\n\t}\n\tfor _, phrase := range requiredPhrases {\n\t\tif !strings.Contains(readme, phrase) {\n\t\t\tt.Fatalf(\"expected README smoke test instructions to mention %q\", phrase)\n\t\t}\n\t}\n\n\tif !regexp.MustCompile(`(?i)inspect.*commit`).MatchString(readme) {\n\t\tt.Fatalf(\"expected README smoke test instructions to mention inspecting the resulting commit\")\n\t}\n}\n","after":"package yolo_runner\n\nimport (\n\t\"os\"\n\t\"regexp\"\n\t\"strings\"\n\t\"testing\"\n)\n\nfunc TestMakefileTargets(t *testing.T) {\n\tcontent, err := os.ReadFile(\"Makefile\")\n\tif err != nil {\n\t\tt.Fatalf(\"expected Makefile to exist: %v\", err)\n\t}\n\n\tmakefile := string(content)\n\tif !regexp.MustCompile(`(?m)^test:\\n\\tgo test \\./\\.\\.\\.`).MatchString(makefile) {\n\t\tt.Fatalf(\"expected make test to run go test ./...\\nMakefile:\\n%s\", makefile)\n\t}\n\tif !regexp.MustCompile(`(?m)^build:(?:\\n\\t.*)*\\n\\tgo build .*bin/yolo-runner`).MatchString(makefile) {\n\t\tt.Fatalf(\"expected make build to build bin/yolo-runner\\nMakefile:\\n%s\", makefile)\n\t}\n}\n\nfunc TestReadmeDocumentsBuildAndUsage(t *testing.T) {\n\tcontent, err := os.ReadFile(\"README.md\")\n\tif err != nil {\n\t\tt.Fatalf(\"expected README.md to exist: %v\", err)\n\t}\n\n\treadme := string(content)\n\trequirements := []string{\"bd\", \"opencode\", \"git\", \"uv\"}\n\tfor _, requirement := range requirements {\n\t\tif !strings.Contains(readme, requirement) {\n\t\t\tt.Fatalf(\"expected README to mention %q\", requirement)\n\t\t}\n\t}\n\n\texamples := []string{\"--model\", \"--dry-run\"}\n\tfor _, example := range examples {\n\t\tif !strings.Contains(readme, example) {\n\t\t\tt.Fatalf(\"expected README to include example with %q\", example)\n\t\t}\n\t}\n}\n\nfunc TestReadmeDocumentsOpenCodeConfigIsolation(t *testing.T) {\n\tcontent, err := os.ReadFile(\"README.md\")\n\tif err != nil {\n\t\tt.Fatalf(\"expected README.md to exist: %v\", err)\n\t}\n\n\treadme := string(content)\n\trequirements := []string{\n\t\t\"XDG_CONFIG_HOME=~/.config/opencode-runner\",\n\t\t\"override\",\n\t\t\"inspect\",\n\t}\n\tfor _, requirement := range requirements {\n\t\tif !strings.Contains(readme, requirement) {\n\t\t\tt.Fatalf(\"expected README to mention %q\", requirement)\n\t\t}\n\t}\n}\n\nfunc TestReadmeDocumentsSmokeTest(t *testing.T) {\n\tcontent, err := os.ReadFile(\"README.md\")\n\tif err != nil {\n\t\tt.Fatalf(\"expected README.md to exist: %v\", err)\n\t}\n\n\treadme := string(content)\n\trequiredPhrases := []string{\n\t\t\"Manual Smoke Test\",\n\t\t\"throwaway branch\",\n\t\t\"worktree\",\n\t\t\"`bd ready`\",\n\t\t\"runner-logs/beads_yolo_runner.jsonl\",\n\t\t\"runner-logs/opencode/\",\n\t\t\"Success looks like\",\n\t}\n\tfor _, phrase := range requiredPhrases {\n\t\tif !strings.Contains(readme, phrase) {\n\t\t\tt.Fatalf(\"expected README smoke test instructions to mention %q\", phrase)\n\t\t}\n\t}\n\n\tif !regexp.MustCompile(`(?i)inspect.*commit`).MatchString(readme) {\n\t\tt.Fatalf(\"expected README smoke test instructions to mention inspecting the resulting commit\")\n\t}\n}\n\nfunc TestReadmeDocumentsTUIAndHeadless(t *testing.T) {\n\tcontent, err := os.ReadFile(\"README.md\")\n\tif err != nil {\n\t\tt.Fatalf(\"expected README.md to exist: %v\", err)\n\t}\n\n\treadme := string(content)\n\trequiredPhrases := []string{\n\t\t\"TUI\",\n\t\t\"TTY\",\n\t\t\"--headless\",\n\t}\n\tfor _, phrase := range requiredPhrases {\n\t\tif !strings.Contains(readme, phrase) {\n\t\t\tt.Fatalf(\"expected README to mention %q\", phrase)\n\t\t}\n\t}\n\n\tif !regexp.MustCompile(`(?i)default.*tui`).MatchString(readme) {\n\t\tt.Fatalf(\"expected README to describe the default TUI behavior\")\n\t}\n\tif !regexp.MustCompile(`(?i)headless`).MatchString(readme) {\n\t\tt.Fatalf(\"expected README to describe the headless mode\")\n\t}\n}\n","additions":26,"deletions":0},"truncated":false},"time":{"start":1768841596377,"end":1768841596554}},"metadata":{"openai":{"itemId":"fc_00dd64f36c7057e101696e61708df08191a565a68fda1cead2"}}}}
{"type":"step_finish","timestamp":1768841596571,"sessionID":"ses_428d3a351ffey4Uy5GHqwPlnuM","part":{"id":"prt_bd72cce8b001TbE9DDhtQ5klne","sessionID":"ses_428d3a351ffey4Uy5GHqwPlnuM","messageID":"msg_bd72c8b88001UcvGSLKZ8Hm0kz","type":"step-finish","reason":"tool-calls","snapshot":"f6961a26e361b311c026cff61e4239bcf127b6a4","cost":0,"tokens":{"input":1131,"output":816,"reasoning":64,"cache":{"read":11008,"write":0}}}}
{"type":"step_start","timestamp":1768841596953,"sessionID":"ses_428d3a351ffey4Uy5GHqwPlnuM","part":{"id":"prt_bd72cd018001jI4gG9TSstotEp","sessionID":"ses_428d3a351ffey4Uy5GHqwPlnuM","messageID":"msg_bd72cceaa001361Jp61L3q8A68","type":"step-start","snapshot":"728b3d8d37fe1bad73f8de27a023f3652ff8e8a8"}}
{"type":"tool_use","timestamp":1768841599210,"sessionID":"ses_428d3a351ffey4Uy5GHqwPlnuM","part":{"id":"prt_bd72cd2e2001AwxrAjKCNiudiy","sessionID":"ses_428d3a351ffey4Uy5GHqwPlnuM","messageID":"msg_bd72cceaa001361Jp61L3q8A68","type":"tool","callID":"call_cTpK3L8ECCsXsfQO5SsR18aD","tool":"bash","state":{"status":"completed","input":{"command":"go test ./...","workdir":"/Users/egv/dev/yolo-runner","description":"Runs Go tests across all packages"},"output":"--- FAIL: TestReadmeDocumentsTUIAndHeadless (0.00s)\n    build_docs_test.go:107: expected README to mention \"TUI\"\nFAIL\nFAIL\tyolo-runner\t0.622s\nok  \tyolo-runner/cmd/yolo-runner\t(cached)\nok  \tyolo-runner/internal/beads\t(cached)\nok  \tyolo-runner/internal/logging\t(cached)\nok  \tyolo-runner/internal/opencode\t(cached)\nok  \tyolo-runner/internal/prompt\t(cached)\nok  \tyolo-runner/internal/runner\t(cached)\nok  \tyolo-runner/internal/ui/tui\t(cached)\nok  \tyolo-runner/internal/vcs/git\t(cached)\nFAIL\n","title":"Runs Go tests across all packages","metadata":{"output":"--- FAIL: TestReadmeDocumentsTUIAndHeadless (0.00s)\n    build_docs_test.go:107: expected README to mention \"TUI\"\nFAIL\nFAIL\tyolo-runner\t0.622s\nok  \tyolo-runner/cmd/yolo-runner\t(cached)\nok  \tyolo-runner/internal/beads\t(cached)\nok  \tyolo-runner/internal/logging\t(cached)\nok  \tyolo-runner/internal/opencode\t(cached)\nok  \tyolo-runner/internal/prompt\t(cached)\nok  \tyolo-runner/internal/runner\t(cached)\nok  \tyolo-runner/internal/ui/tui\t(cached)\nok  \tyolo-runner/internal/vcs/git\t(cached)\nFAIL\n","exit":1,"description":"Runs Go tests across all packages","truncated":false},"time":{"start":1768841598384,"end":1768841599209}},"metadata":{"openai":{"itemId":"fc_0729eb2464c46fe401696e617d9d2c8191a2de923a2ac80b2a"}}}}
{"type":"step_finish","timestamp":1768841599222,"sessionID":"ses_428d3a351ffey4Uy5GHqwPlnuM","part":{"id":"prt_bd72cd8ea001maErAJLt1GmSnt","sessionID":"ses_428d3a351ffey4Uy5GHqwPlnuM","messageID":"msg_bd72cceaa001361Jp61L3q8A68","type":"step-finish","reason":"tool-calls","snapshot":"1622b8b3126512d34909b6124d72ddd90c455a50","cost":0,"tokens":{"input":996,"output":44,"reasoning":0,"cache":{"read":11904,"write":0}}}}
{"type":"step_start","timestamp":1768841599535,"sessionID":"ses_428d3a351ffey4Uy5GHqwPlnuM","part":{"id":"prt_bd72cda2e001QH4g0QB5MRMJW7","sessionID":"ses_428d3a351ffey4Uy5GHqwPlnuM","messageID":"msg_bd72cd904001hxvs4alaLWj0ad","type":"step-start","snapshot":"9ac7b7a8df213889c929c1d8673eba52f7524581"}}
{"type":"tool_use","timestamp":1768841604603,"sessionID":"ses_428d3a351ffey4Uy5GHqwPlnuM","part":{"id":"prt_bd72cdc5e001S36DSO7qN9D8MC","sessionID":"ses_428d3a351ffey4Uy5GHqwPlnuM","messageID":"msg_bd72cd904001hxvs4alaLWj0ad","type":"tool","callID":"call_Jf16vHsbTFh4QW7gWaUtHm1t","tool":"edit","state":{"status":"completed","input":{"filePath":"/Users/egv/dev/yolo-runner/README.md","oldString":"## Run\n\nFrom repo root:\n\n```\n./bin/yolo-runner --repo . --root algi-8bt --model gpt-4o\n./bin/yolo-runner --repo . --root algi-8bt --dry-run\n```\n\nCommon options:\n- `--max N` limit number of tasks processed\n- `--dry-run` print the task prompt without running OpenCode\n","newString":"## Run\n\nFrom repo root:\n\n```\n./bin/yolo-runner --repo . --root algi-8bt --model gpt-4o\n./bin/yolo-runner --repo . --root algi-8bt --dry-run\n```\n\nThe runner starts a TUI by default when attached to a TTY. Use `--headless` to disable the TUI and force plain log output.\n\nCommon options:\n- `--max N` limit number of tasks processed\n- `--dry-run` print the task prompt without running OpenCode\n- `--headless` disable the TUI (useful for CI or non-TTY runs)\n"},"output":"Edit applied successfully.","title":"README.md","metadata":{"diagnostics":{"/Users/egv/dev/yolo-runner/build_docs_test.go":[],"/Users/egv/dev/yolo-runner/go.mod":[{"range":{"start":{"line":6,"character":44},"end":{"line":6,"character":55}},"severity":2,"source":"go mod tidy","message":"github.com/charmbracelet/bubbletea should be direct"},{"range":{"start":{"line":19,"character":26},"end":{"line":19,"character":37}},"severity":2,"source":"go mod tidy","message":"golang.org/x/term should be direct"}],"/Users/egv/dev/yolo-runner/opencode_adapter_v1.go":[{"range":{"start":{"line":24,"character":1},"end":{"line":24,"character":18}},"severity":2,"code":"default","codeDescription":{"href":"https://staticcheck.dev/docs/checks/#S1031"},"source":"S1031","message":"unnecessary nil check around range"}]},"diff":"Index: /Users/egv/dev/yolo-runner/README.md\n===================================================================\n--- /Users/egv/dev/yolo-runner/README.md\n+++ /Users/egv/dev/yolo-runner/README.md\n@@ -46,11 +46,14 @@\n ./bin/yolo-runner --repo . --root algi-8bt --model gpt-4o\n ./bin/yolo-runner --repo . --root algi-8bt --dry-run\n ```\n \n+The runner starts a TUI by default when attached to a TTY. Use `--headless` to disable the TUI and force plain log output.\n+\n Common options:\n - `--max N` limit number of tasks processed\n - `--dry-run` print the task prompt without running OpenCode\n+- `--headless` disable the TUI (useful for CI or non-TTY runs)\n \n ## Task Prompt\n \n The prompt includes:\n","filediff":{"file":"/Users/egv/dev/yolo-runner/README.md","before":"# Yolo Runner\n\nRuns OpenCode in YOLO mode against a single bead task at a time. The runner owns task selection, status updates, and logging; the agent only executes the task it is given.\n\n## Location\n\n- Canonical script: `tools/yolo-runner/beads_yolo_runner.py`\n- Compatibility copy (in-use by existing invocations): `scripts/beads_yolo_runner.py`\n\n## What It Does\n\n- Selects the next open leaf task using beads (`bd ready`).\n- Builds a task prompt with title, description, and acceptance criteria.\n- Runs OpenCode with the YOLO agent using a single prompt.\n- Captures OpenCode JSON output to a per-task log file.\n- Commits changes, closes the bead, verifies it is closed, then runs `bd sync`.\n- If no code changes were produced, marks the task as `blocked` and exits.\n\n## Requirements\n\n- `bd` (beads) CLI available and initialized.\n- `opencode` CLI available.\n- `git` installed and repo cloned.\n- `uv` installed for the Python runner (bootstrap only).\n- Go 1.21+ for building the runner.\n\n## Build\n\nFrom repo root:\n\n```\nmake build\n```\n\n## Test\n\n```\nmake test\n```\n\n## Run\n\nFrom repo root:\n\n```\n./bin/yolo-runner --repo . --root algi-8bt --model gpt-4o\n./bin/yolo-runner --repo . --root algi-8bt --dry-run\n```\n\nCommon options:\n- `--max N` limit number of tasks processed\n- `--dry-run` print the task prompt without running OpenCode\n\n## Task Prompt\n\nThe prompt includes:\n- Bead ID and title\n- Description\n- Acceptance criteria\n- Strict TDD rules\n\nThe YOLO agent must only work on the prompt provided. It must not call beads commands.\n\n## Logging\n\n- Runner summary log: `runner-logs/beads_yolo_runner.jsonl`\n- Per-task OpenCode logs: `runner-logs/opencode/<issue-id>.jsonl`\n\n## OpenCode Config Isolation\n\nThe runner sets `XDG_CONFIG_HOME=~/.config/opencode-runner` so OpenCode reads and writes config in an isolated directory instead of your default `~/.config/opencode`.\n\nIf flags are added later to change the config location, use those to override the default. Otherwise inspect the effective config by checking `~/.config/opencode-runner` directly or exporting a different `XDG_CONFIG_HOME` before running the binary.\n\n## Manual Smoke Test\n\nUse a throwaway branch or a fresh worktree so the run-once flow can safely create a commit and update beads.\n\n1. Create a throwaway branch (or worktree) and ensure the repo is clean.\n2. Run `bd ready` and confirm the selected bead is the one you want to exercise end-to-end.\n3. Run the runner once, for example: `./bin/yolo-runner --repo . --root <root-id> --max 1`.\n4. Inspect the resulting commit and confirm it only includes the expected changes for the bead.\n5. Review the logs at `runner-logs/beads_yolo_runner.jsonl` and `runner-logs/opencode/<issue-id>.jsonl` to confirm the run-once flow completed.\n\nSuccess looks like: the runner finishes without errors, a single commit exists for the bead, the bead is closed and synced, and the logs show a complete OpenCode run with a recorded commit and `bd close`/`bd sync` steps.\n\n## Failure Modes\n\n- **No changes after OpenCode run**: task is marked `blocked`; no commit or close.\n- **Commit fails**: runner exits with the git error; task remains in progress.\n- **OpenCode fails**: runner exits with the OpenCode error code.\n\n## Notes\n\n- OpenCode is run in CI mode to avoid interactive prompts.\n- The runner is responsible for `bd close` and `bd sync` after a successful commit.\n","after":"# Yolo Runner\n\nRuns OpenCode in YOLO mode against a single bead task at a time. The runner owns task selection, status updates, and logging; the agent only executes the task it is given.\n\n## Location\n\n- Canonical script: `tools/yolo-runner/beads_yolo_runner.py`\n- Compatibility copy (in-use by existing invocations): `scripts/beads_yolo_runner.py`\n\n## What It Does\n\n- Selects the next open leaf task using beads (`bd ready`).\n- Builds a task prompt with title, description, and acceptance criteria.\n- Runs OpenCode with the YOLO agent using a single prompt.\n- Captures OpenCode JSON output to a per-task log file.\n- Commits changes, closes the bead, verifies it is closed, then runs `bd sync`.\n- If no code changes were produced, marks the task as `blocked` and exits.\n\n## Requirements\n\n- `bd` (beads) CLI available and initialized.\n- `opencode` CLI available.\n- `git` installed and repo cloned.\n- `uv` installed for the Python runner (bootstrap only).\n- Go 1.21+ for building the runner.\n\n## Build\n\nFrom repo root:\n\n```\nmake build\n```\n\n## Test\n\n```\nmake test\n```\n\n## Run\n\nFrom repo root:\n\n```\n./bin/yolo-runner --repo . --root algi-8bt --model gpt-4o\n./bin/yolo-runner --repo . --root algi-8bt --dry-run\n```\n\nThe runner starts a TUI by default when attached to a TTY. Use `--headless` to disable the TUI and force plain log output.\n\nCommon options:\n- `--max N` limit number of tasks processed\n- `--dry-run` print the task prompt without running OpenCode\n- `--headless` disable the TUI (useful for CI or non-TTY runs)\n\n## Task Prompt\n\nThe prompt includes:\n- Bead ID and title\n- Description\n- Acceptance criteria\n- Strict TDD rules\n\nThe YOLO agent must only work on the prompt provided. It must not call beads commands.\n\n## Logging\n\n- Runner summary log: `runner-logs/beads_yolo_runner.jsonl`\n- Per-task OpenCode logs: `runner-logs/opencode/<issue-id>.jsonl`\n\n## OpenCode Config Isolation\n\nThe runner sets `XDG_CONFIG_HOME=~/.config/opencode-runner` so OpenCode reads and writes config in an isolated directory instead of your default `~/.config/opencode`.\n\nIf flags are added later to change the config location, use those to override the default. Otherwise inspect the effective config by checking `~/.config/opencode-runner` directly or exporting a different `XDG_CONFIG_HOME` before running the binary.\n\n## Manual Smoke Test\n\nUse a throwaway branch or a fresh worktree so the run-once flow can safely create a commit and update beads.\n\n1. Create a throwaway branch (or worktree) and ensure the repo is clean.\n2. Run `bd ready` and confirm the selected bead is the one you want to exercise end-to-end.\n3. Run the runner once, for example: `./bin/yolo-runner --repo . --root <root-id> --max 1`.\n4. Inspect the resulting commit and confirm it only includes the expected changes for the bead.\n5. Review the logs at `runner-logs/beads_yolo_runner.jsonl` and `runner-logs/opencode/<issue-id>.jsonl` to confirm the run-once flow completed.\n\nSuccess looks like: the runner finishes without errors, a single commit exists for the bead, the bead is closed and synced, and the logs show a complete OpenCode run with a recorded commit and `bd close`/`bd sync` steps.\n\n## Failure Modes\n\n- **No changes after OpenCode run**: task is marked `blocked`; no commit or close.\n- **Commit fails**: runner exits with the git error; task remains in progress.\n- **OpenCode fails**: runner exits with the OpenCode error code.\n\n## Notes\n\n- OpenCode is run in CI mode to avoid interactive prompts.\n- The runner is responsible for `bd close` and `bd sync` after a successful commit.\n","additions":3,"deletions":0},"truncated":false},"time":{"start":1768841604601,"end":1768841604603}},"metadata":{"openai":{"itemId":"fc_08b5d5c240d092d701696e618016508191818bd1f12b67faa5"}}}}
{"type":"step_finish","timestamp":1768841604673,"sessionID":"ses_428d3a351ffey4Uy5GHqwPlnuM","part":{"id":"prt_bd72cee33001OBdsph9T1f8C82","sessionID":"ses_428d3a351ffey4Uy5GHqwPlnuM","messageID":"msg_bd72cd904001hxvs4alaLWj0ad","type":"step-finish","reason":"tool-calls","snapshot":"74563272b77d47f1aad558e198a396d9ed334d9d","cost":0,"tokens":{"input":310,"output":278,"reasoning":0,"cache":{"read":12800,"write":0}}}}
{"type":"step_start","timestamp":1768841605012,"sessionID":"ses_428d3a351ffey4Uy5GHqwPlnuM","part":{"id":"prt_bd72cef94001lAPFIKj3yvLiy9","sessionID":"ses_428d3a351ffey4Uy5GHqwPlnuM","messageID":"msg_bd72cee52001TizHmo7Sc0g6eN","type":"step-start","snapshot":"6e791337b43bd368ffc601c24dc964417f85d6f3"}}
{"type":"tool_use","timestamp":1768841607998,"sessionID":"ses_428d3a351ffey4Uy5GHqwPlnuM","part":{"id":"prt_bd72cf713001nzH0Cf16l2fi1E","sessionID":"ses_428d3a351ffey4Uy5GHqwPlnuM","messageID":"msg_bd72cee52001TizHmo7Sc0g6eN","type":"tool","callID":"call_ljWFF8ahRwRGtTFKG0m4Wp2F","tool":"bash","state":{"status":"completed","input":{"command":"go test ./...","workdir":"/Users/egv/dev/yolo-runner","description":"Runs Go tests across all packages"},"output":"ok  \tyolo-runner\t0.265s\nok  \tyolo-runner/cmd/yolo-runner\t(cached)\nok  \tyolo-runner/internal/beads\t(cached)\nok  \tyolo-runner/internal/logging\t(cached)\nok  \tyolo-runner/internal/opencode\t(cached)\nok  \tyolo-runner/internal/prompt\t(cached)\nok  \tyolo-runner/internal/runner\t(cached)\nok  \tyolo-runner/internal/ui/tui\t(cached)\nok  \tyolo-runner/internal/vcs/git\t(cached)\n","title":"Runs Go tests across all packages","metadata":{"output":"ok  \tyolo-runner\t0.265s\nok  \tyolo-runner/cmd/yolo-runner\t(cached)\nok  \tyolo-runner/internal/beads\t(cached)\nok  \tyolo-runner/internal/logging\t(cached)\nok  \tyolo-runner/internal/opencode\t(cached)\nok  \tyolo-runner/internal/prompt\t(cached)\nok  \tyolo-runner/internal/runner\t(cached)\nok  \tyolo-runner/internal/ui/tui\t(cached)\nok  \tyolo-runner/internal/vcs/git\t(cached)\n","exit":0,"description":"Runs Go tests across all packages","truncated":false},"time":{"start":1768841607560,"end":1768841607998}},"metadata":{"openai":{"itemId":"fc_0cf98d1f2fdc0eb301696e6186e9208191bb2e8c99cccd5767"}}}}
{"type":"step_finish","timestamp":1768841608010,"sessionID":"ses_428d3a351ffey4Uy5GHqwPlnuM","part":{"id":"prt_bd72cfb3e001Q0KGK9b5Yn0LDE","sessionID":"ses_428d3a351ffey4Uy5GHqwPlnuM","messageID":"msg_bd72cee52001TizHmo7Sc0g6eN","type":"step-finish","reason":"tool-calls","snapshot":"cb454522eb2801d0fad3f8d83c32c9ffb0a33cb3","cost":0,"tokens":{"input":471,"output":44,"reasoning":0,"cache":{"read":12928,"write":0}}}}
{"type":"step_start","timestamp":1768841608397,"sessionID":"ses_428d3a351ffey4Uy5GHqwPlnuM","part":{"id":"prt_bd72cfccd0010tpxyP0Szx6aKO","sessionID":"ses_428d3a351ffey4Uy5GHqwPlnuM","messageID":"msg_bd72cfb57001NmcSybVRrGQJF1","type":"step-start","snapshot":"856f45a5970495583a7b1f78ab02187ddcfe3269"}}
{"type":"tool_use","timestamp":1768841612080,"sessionID":"ses_428d3a351ffey4Uy5GHqwPlnuM","part":{"id":"prt_bd72d048c001j7VGz6yW0c6Xkw","sessionID":"ses_428d3a351ffey4Uy5GHqwPlnuM","messageID":"msg_bd72cfb57001NmcSybVRrGQJF1","type":"tool","callID":"call_skJ5krzbl0yaBPlQ4P9j7qo3","tool":"bash","state":{"status":"completed","input":{"command":"git status --short","workdir":"/Users/egv/dev/yolo-runner","description":"Shows short git status"},"output":" M .beads/issues.jsonl\n M README.md\n M build_docs_test.go\n M runner-logs/beads_yolo_runner.jsonl\n?? runner-logs/opencode/yolo-runner-127.4.6.jsonl\n","title":"Shows short git status","metadata":{"output":" M .beads/issues.jsonl\n M README.md\n M build_docs_test.go\n M runner-logs/beads_yolo_runner.jsonl\n?? runner-logs/opencode/yolo-runner-127.4.6.jsonl\n","exit":0,"description":"Shows short git status","truncated":false},"time":{"start":1768841612069,"end":1768841612079}},"metadata":{"openai":{"itemId":"fc_0c133d98fad74f3a01696e618a5dc88191a3c1a3a785eae4de"}}}}
{"type":"tool_use","timestamp":1768841612292,"sessionID":"ses_428d3a351ffey4Uy5GHqwPlnuM","part":{"id":"prt_bd72d0b29001Xd7M2l4030A5l2","sessionID":"ses_428d3a351ffey4Uy5GHqwPlnuM","messageID":"msg_bd72cfb57001NmcSybVRrGQJF1","type":"tool","callID":"call_yUJEdoQfrQUSLjbpbOqznION","tool":"bash","state":{"status":"completed","input":{"command":"git diff","workdir":"/Users/egv/dev/yolo-runner","description":"Shows git diff"},"output":"diff --git a/.beads/issues.jsonl b/.beads/issues.jsonl\nindex 3ff9fd2..14e7c5a 100644\n--- a/.beads/issues.jsonl\n+++ b/.beads/issues.jsonl\n@@ -19,7 +19,7 @@\n {\"id\":\"yolo-runner-127.4.3\",\"title\":\"v1.2: Wire runner phases into TUI\",\"description\":\"Plumb runner phase/state updates into the TUI.\\n\\nFiles:\\n- Modify: internal/runner/runner.go\\n- Create: internal/runner/events.go\\n\\nAcceptance:\\n- Runner emits structured events for: selecting task, bd update, opencode start/end, git add/status/commit, bd close/verify, bd sync\\n- TUI displays current phase based on latest event\\n- go test ./... passes\",\"acceptance_criteria\":\"- Runner emits phase events\\n- TUI updates from events\\n- go test ./... passes\",\"status\":\"closed\",\"priority\":1,\"issue_type\":\"task\",\"owner\":\"g.evstratov@gmail.com\",\"created_at\":\"2026-01-19T15:55:27.357111+03:00\",\"created_by\":\"Gennady Evstratov\",\"updated_at\":\"2026-01-19T19:24:34.458796+03:00\",\"closed_at\":\"2026-01-19T19:24:34.458796+03:00\",\"close_reason\":\"Closed\",\"dependencies\":[{\"issue_id\":\"yolo-runner-127.4.3\",\"depends_on_id\":\"yolo-runner-127.4\",\"type\":\"parent-child\",\"created_at\":\"2026-01-19T15:55:27.357695+03:00\",\"created_by\":\"Gennady Evstratov\"}]}\n {\"id\":\"yolo-runner-127.4.4\",\"title\":\"v1.2: Headless mode flag\",\"description\":\"Add CLI flag --headless to force plain output (no Bubble Tea), even when stdout is a TTY.\\n\\nFiles:\\n- Modify: cmd/yolo-runner/main.go\\n- Modify: cmd/yolo-runner/main_test.go\\n\\nAcceptance:\\n- Given stdout is a TTY, default is TUI\\n- Given --headless, runner does not start Bubble Tea\\n- go test ./... passes\",\"acceptance_criteria\":\"- Default TUI on TTY\\n- --headless disables TUI\\n- go test ./... passes\",\"status\":\"closed\",\"priority\":1,\"issue_type\":\"task\",\"owner\":\"g.evstratov@gmail.com\",\"created_at\":\"2026-01-19T15:55:27.438163+03:00\",\"created_by\":\"Gennady Evstratov\",\"updated_at\":\"2026-01-19T19:41:31.309652+03:00\",\"closed_at\":\"2026-01-19T19:41:31.309652+03:00\",\"close_reason\":\"Closed\",\"dependencies\":[{\"issue_id\":\"yolo-runner-127.4.4\",\"depends_on_id\":\"yolo-runner-127.4\",\"type\":\"parent-child\",\"created_at\":\"2026-01-19T15:55:27.438678+03:00\",\"created_by\":\"Gennady Evstratov\"}]}\n {\"id\":\"yolo-runner-127.4.5\",\"title\":\"v1.2: Detect OpenCode log growth for heartbeat\",\"description\":\"Implement a watcher that polls the per-task OpenCode JSONL log file size and sends an event when it grows.\\n\\nFiles:\\n- Create: internal/ui/tui/logwatch.go\\n- Create: internal/ui/tui/logwatch_test.go\\n\\nAcceptance:\\n- Given a file grows, watcher emits an \\\"output\\\" event\\n- Given no growth, watcher emits nothing\\n- Tests use temp files and a fake clock/ticker\\n- go test ./... passes\",\"acceptance_criteria\":\"- Emits event on file growth\\n- No event when no growth\\n- Deterministic tests\\n- go test ./... passes\",\"status\":\"closed\",\"priority\":2,\"issue_type\":\"task\",\"owner\":\"g.evstratov@gmail.com\",\"created_at\":\"2026-01-19T15:55:27.519065+03:00\",\"created_by\":\"Gennady Evstratov\",\"updated_at\":\"2026-01-19T19:52:41.943967+03:00\",\"closed_at\":\"2026-01-19T19:52:41.943967+03:00\",\"close_reason\":\"Closed\",\"dependencies\":[{\"issue_id\":\"yolo-runner-127.4.5\",\"depends_on_id\":\"yolo-runner-127.4\",\"type\":\"parent-child\",\"created_at\":\"2026-01-19T15:55:27.519738+03:00\",\"created_by\":\"Gennady Evstratov\"}]}\n-{\"id\":\"yolo-runner-127.4.6\",\"title\":\"v1.2: Update README for TUI/headless\",\"description\":\"Document the TUI behavior and the --headless flag.\\n\\nFiles:\\n- Modify: README.md\\n\\nAcceptance:\\n- README explains default TUI on TTY\\n- README documents --headless\\n- go test ./... passes\",\"acceptance_criteria\":\"- README documents TUI and --headless\",\"status\":\"open\",\"priority\":3,\"issue_type\":\"task\",\"owner\":\"g.evstratov@gmail.com\",\"created_at\":\"2026-01-19T15:55:27.595872+03:00\",\"created_by\":\"Gennady Evstratov\",\"updated_at\":\"2026-01-19T15:55:27.595872+03:00\",\"dependencies\":[{\"issue_id\":\"yolo-runner-127.4.6\",\"depends_on_id\":\"yolo-runner-127.4\",\"type\":\"parent-child\",\"created_at\":\"2026-01-19T15:55:27.596552+03:00\",\"created_by\":\"Gennady Evstratov\"}]}\n+{\"id\":\"yolo-runner-127.4.6\",\"title\":\"v1.2: Update README for TUI/headless\",\"description\":\"Document the TUI behavior and the --headless flag.\\n\\nFiles:\\n- Modify: README.md\\n\\nAcceptance:\\n- README explains default TUI on TTY\\n- README documents --headless\\n- go test ./... passes\",\"acceptance_criteria\":\"- README documents TUI and --headless\",\"status\":\"in_progress\",\"priority\":3,\"issue_type\":\"task\",\"owner\":\"g.evstratov@gmail.com\",\"created_at\":\"2026-01-19T15:55:27.595872+03:00\",\"created_by\":\"Gennady Evstratov\",\"updated_at\":\"2026-01-19T19:52:46.798437+03:00\",\"dependencies\":[{\"issue_id\":\"yolo-runner-127.4.6\",\"depends_on_id\":\"yolo-runner-127.4\",\"type\":\"parent-child\",\"created_at\":\"2026-01-19T15:55:27.596552+03:00\",\"created_by\":\"Gennady Evstratov\"}]}\n {\"id\":\"yolo-runner-127.4.7\",\"title\":\"v1.2: Detect default root (avoid hardcoded algi-8bt)\",\"description\":\"Fix the Go runner default --root behavior so it does not default to an unrelated project id (algi-8bt).\\n\\nGoal:\\n- If --root is omitted, infer a sensible default for this repo OR fail fast with a clear error.\\n\\nRecommended approach:\\n- If exactly one roadmap root exists (e.g., top-level epic titled \\\"Roadmap\\\"), default to that id.\\n- Otherwise, require --root and print instructions.\\n\\nFiles:\\n- Modify: cmd/yolo-runner/main.go\\n- Modify: cmd/yolo-runner/main_test.go\\n- Modify (if needed): internal/beads/client.go\\n\\nAcceptance:\\n- Given --root is not provided and a unique \\\"Roadmap\\\" epic exists, runner uses that id\\n- Given --root is not provided and no unique default can be inferred, runner exits non-zero with a clear message\\n- Given --root is provided, runner behavior unchanged\\n- go test ./... passes\",\"acceptance_criteria\":\"- Default root is inferred when unique Roadmap epic exists\\n- Otherwise runner fails fast with clear message\\n- Explicit --root still works\\n- go test ./... passes\",\"status\":\"blocked\",\"priority\":1,\"issue_type\":\"task\",\"owner\":\"g.evstratov@gmail.com\",\"created_at\":\"2026-01-19T16:12:48.996251+03:00\",\"created_by\":\"Gennady Evstratov\",\"updated_at\":\"2026-01-19T19:48:09.326593+03:00\",\"dependencies\":[{\"issue_id\":\"yolo-runner-127.4.7\",\"depends_on_id\":\"yolo-runner-127.4\",\"type\":\"parent-child\",\"created_at\":\"2026-01-19T16:12:48.996902+03:00\",\"created_by\":\"Gennady Evstratov\"}]}\n {\"id\":\"yolo-runner-127.4.8\",\"title\":\"v1.2: Diagnose and fail-fast on OpenCode stalls (question/permission/deadlock)\",\"description\":\"Fix the Go runner so it never hangs indefinitely while waiting for OpenCode.\\n\\nPart A: Diagnose why OpenCode stalls\\n- Determine the primary stall mechanism on this machine:\\n  - permission/doom_loop prompt (service=permission asking)\\n  - question prompt (service=question asking)\\n  - provider/network hang with no output\\n- Capture the relevant evidence in runner logs and/or an error message:\\n  - last N lines from ~/.local/share/opencode/log/\\u003clatest\\u003e.log (or equivalent)\\n  - opencode session id (if available)\\n  - last output timestamp/age for runner-logs/opencode/\\u003cissue\\u003e.jsonl\\n\\nPart B: Fail fast + recoverable state\\n- Add a watchdog around the OpenCode subprocess:\\n  - Track output activity by observing runner-logs/opencode/\\u003cissue\\u003e.jsonl growth/mtime\\n  - If no growth for N seconds (configurable, default 600s), kill the OpenCode process group\\n  - Update the bead status to blocked with a short reason that includes the detected stall category and key evidence pointers\\n  - Exit non-zero so the runner does not silently succeed\\n\\nFiles:\\n- Modify: internal/opencode/client.go\\n- Modify: internal/runner/runner.go\\n- Create: internal/opencode/watchdog.go\\n- Create: internal/opencode/watchdog_test.go\\n\\nRules:\\n- Go only\\n\\nAcceptance:\\n- Given OpenCode output does not change for \\u003eN seconds, runner terminates OpenCode and exits with an error\\n- Given the stall looks like a permission/question prompt, runner error message includes that classification and points to the relevant opencode log file\\n- Given the stall looks like no provider output, runner classifies as \\\"no_output\\\" and includes last-output age\\n- Bead is updated to status=blocked with the same classification info\\n- go test ./... passes\",\"acceptance_criteria\":\"- Watchdog kills OpenCode on no-output timeout\\n- Error includes classification and evidence pointers\\n- Bead is marked blocked with classification\\n- go test ./... passes\",\"status\":\"closed\",\"priority\":0,\"issue_type\":\"task\",\"owner\":\"g.evstratov@gmail.com\",\"created_at\":\"2026-01-19T16:18:40.775675+03:00\",\"created_by\":\"Gennady Evstratov\",\"updated_at\":\"2026-01-19T17:57:20.991676+03:00\",\"closed_at\":\"2026-01-19T17:57:20.991676+03:00\",\"close_reason\":\"Closed\",\"dependencies\":[{\"issue_id\":\"yolo-runner-127.4.8\",\"depends_on_id\":\"yolo-runner-127.4\",\"type\":\"parent-child\",\"created_at\":\"2026-01-19T16:18:40.778049+03:00\",\"created_by\":\"Gennady Evstratov\"}]}\n {\"id\":\"yolo-runner-127.4.9\",\"title\":\"v1.1: Align Go runner OpenCode invocation with Python runner\",\"description\":\"The Python beads runner is more reliable than the Go runner because it invokes OpenCode differently:\\n\\n1) Config isolation:\\n- Python sets XDG_CONFIG_HOME to ~/.config/opencode-runner and forces OPENCODE_CONFIG_DIR/OPENCODE_CONFIG/OPENCODE_CONFIG_CONTENT.\\n- Go runner currently leaves configRoot/configDir empty, so OpenCode uses the user global config, which can trigger interactive questions/permissions and hangs.\\n\\n2) Log integrity:\\n- Python redirects only stdout to runner-logs/opencode/\\u003cissue\\u003e.jsonl.\\n- Go runner currently redirects BOTH stdout and stderr into the JSONL file, which can corrupt the JSONL stream and break log-watcher/spinner logic.\\n\\nThis epic aligns Go behavior to match the proven Python behavior, reducing hangs and making watchdog/logging reliable.\",\"acceptance_criteria\":\"- Go runner sets isolated OpenCode config by default (same as Python runner) unless user overrides\\n- Go runner writes OpenCode stdout to runner-logs/opencode/\\u003cissue\\u003e.jsonl and does NOT mix stderr into that file\\n- Changes are covered by unit tests\\n- go test ./... passes\",\"status\":\"open\",\"priority\":0,\"issue_type\":\"epic\",\"owner\":\"g.evstratov@gmail.com\",\"created_at\":\"2026-01-19T18:40:03.684668+03:00\",\"created_by\":\"Gennady Evstratov\",\"updated_at\":\"2026-01-19T18:40:03.684668+03:00\",\"dependencies\":[{\"issue_id\":\"yolo-runner-127.4.9\",\"depends_on_id\":\"yolo-runner-127.4\",\"type\":\"parent-child\",\"created_at\":\"2026-01-19T18:40:03.685391+03:00\",\"created_by\":\"Gennady Evstratov\"}]}\ndiff --git a/README.md b/README.md\nindex 115c86b..4240188 100644\n--- a/README.md\n+++ b/README.md\n@@ -47,9 +47,12 @@ From repo root:\n ./bin/yolo-runner --repo . --root algi-8bt --dry-run\n ```\n \n+The runner starts a TUI by default when attached to a TTY. Use `--headless` to disable the TUI and force plain log output.\n+\n Common options:\n - `--max N` limit number of tasks processed\n - `--dry-run` print the task prompt without running OpenCode\n+- `--headless` disable the TUI (useful for CI or non-TTY runs)\n \n ## Task Prompt\n \ndiff --git a/build_docs_test.go b/build_docs_test.go\nindex 5c682da..2490407 100644\n--- a/build_docs_test.go\n+++ b/build_docs_test.go\n@@ -89,3 +89,29 @@ func TestReadmeDocumentsSmokeTest(t *testing.T) {\n \t\tt.Fatalf(\"expected README smoke test instructions to mention inspecting the resulting commit\")\n \t}\n }\n+\n+func TestReadmeDocumentsTUIAndHeadless(t *testing.T) {\n+\tcontent, err := os.ReadFile(\"README.md\")\n+\tif err != nil {\n+\t\tt.Fatalf(\"expected README.md to exist: %v\", err)\n+\t}\n+\n+\treadme := string(content)\n+\trequiredPhrases := []string{\n+\t\t\"TUI\",\n+\t\t\"TTY\",\n+\t\t\"--headless\",\n+\t}\n+\tfor _, phrase := range requiredPhrases {\n+\t\tif !strings.Contains(readme, phrase) {\n+\t\t\tt.Fatalf(\"expected README to mention %q\", phrase)\n+\t\t}\n+\t}\n+\n+\tif !regexp.MustCompile(`(?i)default.*tui`).MatchString(readme) {\n+\t\tt.Fatalf(\"expected README to describe the default TUI behavior\")\n+\t}\n+\tif !regexp.MustCompile(`(?i)headless`).MatchString(readme) {\n+\t\tt.Fatalf(\"expected README to describe the headless mode\")\n+\t}\n+}\ndiff --git a/runner-logs/beads_yolo_runner.jsonl b/runner-logs/beads_yolo_runner.jsonl\nindex e8fb3bc..dd2a92a 100644\n--- a/runner-logs/beads_yolo_runner.jsonl\n+++ b/runner-logs/beads_yolo_runner.jsonl\n@@ -13,3 +13,4 @@\n {\"timestamp\": \"2026-01-19T19:02:37Z\", \"issue_id\": \"yolo-runner-127.4.2\", \"title\": \"v1.2: TUI model for runner status\", \"status\": \"completed\", \"commit_sha\": \"8e8cc26b9970413399f384dd498a5ce08a2d3d37\"}\n {\"timestamp\": \"2026-01-19T19:24:34Z\", \"issue_id\": \"yolo-runner-127.4.3\", \"title\": \"v1.2: Wire runner phases into TUI\", \"status\": \"completed\", \"commit_sha\": \"0585becefcbb776410c255013e4bac8bb0056e22\"}\n {\"timestamp\": \"2026-01-19T19:48:09Z\", \"issue_id\": \"yolo-runner-127.4.7\", \"title\": \"v1.2: Detect default root (avoid hardcoded algi-8bt)\", \"status\": \"blocked\", \"commit_sha\": \"361277ed2e0f8f9ae1a7b1adf09ae2c7168c4c26\"}\n+{\"timestamp\": \"2026-01-19T19:52:41Z\", \"issue_id\": \"yolo-runner-127.4.5\", \"title\": \"v1.2: Detect OpenCode log growth for heartbeat\", \"status\": \"completed\", \"commit_sha\": \"03cc0beaae40d47e575620c0cbd3a425255c9568\"}\n","title":"Shows git diff","metadata":{"output":"diff --git a/.beads/issues.jsonl b/.beads/issues.jsonl\nindex 3ff9fd2..14e7c5a 100644\n--- a/.beads/issues.jsonl\n+++ b/.beads/issues.jsonl\n@@ -19,7 +19,7 @@\n {\"id\":\"yolo-runner-127.4.3\",\"title\":\"v1.2: Wire runner phases into TUI\",\"description\":\"Plumb runner phase/state updates into the TUI.\\n\\nFiles:\\n- Modify: internal/runner/runner.go\\n- Create: internal/runner/events.go\\n\\nAcceptance:\\n- Runner emits structured events for: selecting task, bd update, opencode start/end, git add/status/commit, bd close/verify, bd sync\\n- TUI displays current phase based on latest event\\n- go test ./... passes\",\"acceptance_criteria\":\"- Runner emits phase events\\n- TUI updates from events\\n- go test ./... passes\",\"status\":\"closed\",\"priority\":1,\"issue_type\":\"task\",\"owner\":\"g.evstratov@gmail.com\",\"created_at\":\"2026-01-19T15:55:27.357111+03:00\",\"created_by\":\"Gennady Evstratov\",\"updated_at\":\"2026-01-19T19:24:34.458796+03:00\",\"closed_at\":\"2026-01-19T19:24:34.458796+03:00\",\"close_reason\":\"Closed\",\"dependencies\":[{\"issue_id\":\"yolo-runner-127.4.3\",\"depends_on_id\":\"yolo-runner-127.4\",\"type\":\"parent-child\",\"created_at\":\"2026-01-19T15:55:27.357695+03:00\",\"created_by\":\"Gennady Evstratov\"}]}\n {\"id\":\"yolo-runner-127.4.4\",\"title\":\"v1.2: Headless mode flag\",\"description\":\"Add CLI flag --headless to force plain output (no Bubble Tea), even when stdout is a TTY.\\n\\nFiles:\\n- Modify: cmd/yolo-runner/main.go\\n- Modify: cmd/yolo-runner/main_test.go\\n\\nAcceptance:\\n- Given stdout is a TTY, default is TUI\\n- Given --headless, runner does not start Bubble Tea\\n- go test ./... passes\",\"acceptance_criteria\":\"- Default TUI on TTY\\n- --headless disables TUI\\n- go test ./... passes\",\"status\":\"closed\",\"priority\":1,\"issue_type\":\"task\",\"owner\":\"g.evstratov@gmail.com\",\"created_at\":\"2026-01-19T15:55:27.438163+03:00\",\"created_by\":\"Gennady Evstratov\",\"updated_at\":\"2026-01-19T19:41:31.309652+03:00\",\"closed_at\":\"2026-01-19T19:41:31.309652+03:00\",\"close_reason\":\"Closed\",\"dependencies\":[{\"issue_id\":\"yolo-runner-127.4.4\",\"depends_on_id\":\"yolo-runner-127.4\",\"type\":\"parent-child\",\"created_at\":\"2026-01-19T15:55:27.438678+03:00\",\"created_by\":\"Gennady Evstratov\"}]}\n {\"id\":\"yolo-runner-127.4.5\",\"title\":\"v1.2: Detect OpenCode log growth for heartbeat\",\"description\":\"Implement a watcher that polls the per-task OpenCode JSONL log file size and sends an event when it grows.\\n\\nFiles:\\n- Create: internal/ui/tui/logwatch.go\\n- Create: internal/ui/tui/logwatch_test.go\\n\\nAcceptance:\\n- Given a file grows, watcher emits an \\\"output\\\" event\\n- Given no growth, watcher emits nothing\\n- Tests use temp files and a fake clock/ticker\\n- go test ./... passes\",\"acceptance_criteria\":\"- Emits event on file growth\\n- No event when no growth\\n- Deterministic tests\\n- go test ./... passes\",\"status\":\"closed\",\"priority\":2,\"issue_type\":\"task\",\"owner\":\"g.evstratov@gmail.com\",\"created_at\":\"2026-01-19T15:55:27.519065+03:00\",\"created_by\":\"Gennady Evstratov\",\"updated_at\":\"2026-01-19T19:52:41.943967+03:00\",\"closed_at\":\"2026-01-19T19:52:41.943967+03:00\",\"close_reason\":\"Closed\",\"dependencies\":[{\"issue_id\":\"yolo-runner-127.4.5\",\"depends_on_id\":\"yolo-runner-127.4\",\"type\":\"parent-child\",\"created_at\":\"2026-01-19T15:55:27.519738+03:00\",\"created_by\":\"Gennady Evstratov\"}]}\n-{\"id\":\"yolo-runner-127.4.6\",\"title\":\"v1.2: Update README for TUI/headless\",\"description\":\"Document the TUI behavior and the --headless flag.\\n\\nFiles:\\n- Modify: README.md\\n\\nAcceptance:\\n- README explains default TUI on TTY\\n- README documents --headless\\n- go test ./... passes\",\"acceptance_criteria\":\"- README documents TUI and --headless\",\"status\":\"open\",\"priority\":3,\"issue_type\":\"task\",\"owner\":\"g.evstratov@gmail.com\",\"created_at\":\"2026-01-19T15:55:27.595872+03:00\",\"created_by\":\"Gennady Evstratov\",\"updated_at\":\"2026-01-19T15:55:27.595872+03:00\",\"dependencies\":[{\"issue_id\":\"yolo-runner-127.4.6\",\"depends_on_id\":\"yolo-runner-127.4\",\"type\":\"parent-child\",\"created_at\":\"2026-01-19T15:55:27.596552+03:00\",\"created_by\":\"Gennady Evstratov\"}]}\n+{\"id\":\"yolo-runner-127.4.6\",\"title\":\"v1.2: Update README for TUI/headless\",\"description\":\"Document the TUI behavior and the --headless flag.\\n\\nFiles:\\n- Modify: README.md\\n\\nAcceptance:\\n- README explains default TUI on TTY\\n- README documents --headless\\n- go test ./... passes\",\"acceptance_criteria\":\"- README documents TUI and --headless\",\"status\":\"in_progress\",\"priority\":3,\"issue_type\":\"task\",\"owner\":\"g.evstratov@gmail.com\",\"created_at\":\"2026-01-19T15:55:27.595872+03:00\",\"created_by\":\"Gennady Evstratov\",\"updated_at\":\"2026-01-19T19:52:46.798437+03:00\",\"dependencies\":[{\"issue_id\":\"yolo-runner-127.4.6\",\"depends_on_id\":\"yolo-runner-127.4\",\"type\":\"parent-child\",\"created_at\":\"2026-01-19T15:55:27.596552+03:00\",\"created_by\":\"Gennady Evstratov\"}]}\n {\"id\":\"yolo-runner-127.4.7\",\"title\":\"v1.2: Detect default root (avoid hardcoded algi-8bt)\",\"description\":\"Fix the Go runner default --root behavior so it does not default to an unrelated project id (algi-8bt).\\n\\nGoal:\\n- If --root is omitted, infer a sensible default for this repo OR fail fast with a clear error.\\n\\nRecommended approach:\\n- If exactly one roadmap root exists (e.g., top-level epic titled \\\"Roadmap\\\"), default to that id.\\n- Otherwise, require --root and print instructions.\\n\\nFiles:\\n- Modify: cmd/yolo-runner/main.go\\n- Modify: cmd/yolo-runner/main_test.go\\n- Modify (if needed): internal/beads/client.go\\n\\nAcceptance:\\n- Given --root is not provided and a unique \\\"Roadmap\\\" epic exists, runner uses that id\\n- Given --root is not provided and no unique default can be inferred, runner exits non-zero with a clear message\\n- Given --root is provided, runner behavior unchanged\\n- go test ./... passes\",\"acceptance_criteria\":\"- Default root is inferred when unique Roadmap epic exists\\n- Otherwise runner fails fast with clear message\\n- Explicit --root still works\\n- go test ./... passes\",\"status\":\"blocked\",\"priority\":1,\"issue_type\":\"task\",\"owner\":\"g.evstratov@gmail.com\",\"created_at\":\"2026-01-19T16:12:48.996251+03:00\",\"created_by\":\"Gennady Evstratov\",\"updated_at\":\"2026-01-19T19:48:09.326593+03:00\",\"dependencies\":[{\"issue_id\":\"yolo-runner-127.4.7\",\"depends_on_id\":\"yolo-runner-127.4\",\"type\":\"parent-child\",\"created_at\":\"2026-01-19T16:12:48.996902+03:00\",\"created_by\":\"Gennady Evstratov\"}]}\n {\"id\":\"yolo-runner-127.4.8\",\"title\":\"v1.2: Diagnose and fail-fast on OpenCode stalls (question/permission/deadlock)\",\"description\":\"Fix the Go runner so it never hangs indefinitely while waiting for OpenCode.\\n\\nPart A: Diagnose why OpenCode stalls\\n- Determine the primary stall mechanism on this machine:\\n  - permission/doom_loop prompt (service=permission asking)\\n  - question prompt (service=question asking)\\n  - provider/network hang with no output\\n- Capture the relevant evidence in runner logs and/or an error message:\\n  - last N lines from ~/.local/share/opencode/log/\\u003clatest\\u003e.log (or equivalent)\\n  - opencode session id (if available)\\n  - last output timestamp/age for runner-logs/opencode/\\u003cissue\\u003e.jsonl\\n\\nPart B: Fail fast + recoverable state\\n- Add a watchdog around the OpenCode subprocess:\\n  - Track output activity by observing runner-logs/opencode/\\u003cissue\\u003e.jsonl growth/mtime\\n  - If no growth for N seconds (configurable, default 600s), kill the OpenCode process group\\n  - Update the bead status to blocked with a short reason that includes the detected stall category and key evidence pointers\\n  - Exit non-zero so the runner does not silently succeed\\n\\nFiles:\\n- Modify: internal/opencode/client.go\\n- Modify: internal/runner/runner.go\\n- Create: internal/opencode/watchdog.go\\n- Create: internal/opencode/watchdog_test.go\\n\\nRules:\\n- Go only\\n\\nAcceptance:\\n- Given OpenCode output does not change for \\u003eN seconds, runner terminates OpenCode and exits with an error\\n- Given the stall looks like a permission/question prompt, runner error message includes that classification and points to the relevant opencode log file\\n- Given the stall looks like no provider output, runner classifies as \\\"no_output\\\" and includes last-output age\\n- Bead is updated to status=blocked with the same classification info\\n- go test ./... passes\",\"acceptance_criteria\":\"- Watchdog kills OpenCode on no-output timeout\\n- Error includes classification and evidence pointers\\n- Bead is marked blocked with classification\\n- go test ./... passes\",\"status\":\"closed\",\"priority\":0,\"issue_type\":\"task\",\"owner\":\"g.evstratov@gmail.com\",\"created_at\":\"2026-01-19T16:18:40.775675+03:00\",\"created_by\":\"Gennady Evstratov\",\"updated_at\":\"2026-01-19T17:57:20.991676+03:00\",\"closed_at\":\"2026-01-19T17:57:20.991676+03:00\",\"close_reason\":\"Closed\",\"dependencies\":[{\"issue_id\":\"yolo-runner-127.4.8\",\"depends_on_id\":\"yolo-runner-127.4\",\"type\":\"parent-child\",\"created_at\":\"2026-01-19T16:18:40.778049+03:00\",\"created_by\":\"Gennady Evstratov\"}]}\n {\"id\":\"yolo-runner-127.4.9\",\"title\":\"v1.1: Align Go runner OpenCode invocation with Python runner\",\"description\":\"The Python beads runner is more reliable than the Go runner because it invokes OpenCode differently:\\n\\n1) Config isolation:\\n- Python sets XDG_CONFIG_HOME to ~/.config/opencode-runner and forces OPENCODE_CONFIG_DIR/OPENCODE_CONFIG/OPENCODE_CONFIG_CONTENT.\\n- Go runner currently leaves configRoot/configDir empty, so OpenCode uses the user global config, which can trigger interactive questions/permissions and hangs.\\n\\n2) Log integrity:\\n- Python redirects only stdout to runner-logs/opencode/\\u003cissue\\u003e.jsonl.\\n- Go runner currently redirects BOTH stdout and stderr into the JSONL file, which can corrupt the JSONL stream and break log-watcher/spinner logic.\\n\\nThis epic aligns Go behavior to match the proven Python behavior, reducing hangs and making watchdog/logging reliable.\",\"acceptance_criteria\":\"- Go runner sets isolated OpenCode config by default (same as Python runner) unless user overrides\\n- Go runner writes OpenCode stdout to runner-logs/opencode/\\u003cissue\\u003e.jsonl and does NOT mix stderr into that file\\n- Changes are covered by unit tests\\n- go test ./... passes\",\"status\":\"open\",\"priority\":0,\"issue_type\":\"epic\",\"owner\":\"g.evstratov@gmail.com\",\"created_at\":\"2026-01-19T18:40:03.684668+03:00\",\"created_by\":\"Gennady Evstratov\",\"updated_at\":\"2026-01-19T18:40:03.684668+03:00\",\"dependencies\":[{\"issue_id\":\"yolo-runner-127.4.9\",\"depends_on_id\":\"yolo-runner-127.4\",\"type\":\"parent-child\",\"created_at\":\"2026-01-19T18:40:03.685391+03:00\",\"created_by\":\"Gennady Evstratov\"}]}\ndiff --git a/README.md b/README.md\nindex 115c86b..4240188 100644\n--- a/README.md\n+++ b/README.md\n@@ -47,9 +47,12 @@ From repo root:\n ./bin/yolo-runner --repo . --root algi-8bt --dry-run\n ```\n \n+The runner starts a TUI by default when attached to a TTY. Use `--headless` to disable the TUI and force plain log output.\n+\n Common options:\n - `--max N` limit number of tasks processed\n - `--dry-run` print the task prompt without running OpenCode\n+- `--headless` disable the TUI (useful for CI or non-TTY runs)\n \n ## Task Prompt\n \ndiff --git a/build_docs_test.go b/build_docs_test.go\nindex 5c682da..2490407 100644\n--- a/build_docs_test.go\n+++ b/build_docs_test.go\n@@ -89,3 +89,29 @@ func TestReadmeDocumentsSmokeTest(t *testing.T) {\n \t\tt.Fatalf(\"expected README smoke test instructions to mention inspecting the resulting commit\")\n \t}\n }\n+\n+func TestReadmeDocumentsTUIAndHeadless(t *testing.T) {\n+\tcontent, err := os.ReadFile(\"README.md\")\n+\tif err != nil {\n+\t\tt.Fatalf(\"expected README.md to exist: %v\", err)\n+\t}\n+\n+\treadme := string(content)\n+\trequiredPhrases := []string{\n+\t\t\"TUI\",\n+\t\t\"TTY\",\n+\t\t\"--headless\",\n+\t}\n+\tfor _, phrase := range requiredPhrases {\n+\t\tif !strings.Contains(readme, phrase) {\n+\t\t\tt.Fatalf(\"expected README to mention %q\", phrase)\n+\t\t}\n+\t}\n+\n+\tif !regexp.MustCompile(`(?i)default.*tui`).MatchString(readme) {\n+\t\tt.Fatalf(\"expected README to describe the default TUI behavior\")\n+\t}\n+\tif !regexp.MustCompile(`(?i)headless`).MatchString(readme) {\n+\t\tt.Fatalf(\"expected README to describe the headless mode\")\n+\t}\n+}\ndiff --git a/runner-logs/beads_yolo_runner.jsonl b/runner-logs/beads_yolo_runner.jsonl\nindex e8fb3bc..dd2a92a 100644\n--- a/runner-logs/beads_yolo_runner.jsonl\n+++ b/runner-logs/beads_yolo_runner.jsonl\n@@ -13,3 +13,4 @@\n {\"timestamp\": \"2026-01-19T19:02:37Z\", \"issue_id\": \"yolo-runner-127.4.2\", \"title\": \"v1.2: TUI model for runner status\", \"status\": \"completed\", \"commit_sha\": \"8e8cc26b9970413399f384dd498a5ce08a2d3d37\"}\n {\"timestamp\": \"2026-01-19T19:24:34Z\", \"issue_id\": \"yolo-runner-127.4.3\", \"title\": \"v1.2: Wire runner phases into TUI\", \"status\": \"completed\", \"commit_sha\": \"0585becefcbb776410c255013e4bac8bb0056e22\"}\n {\"timestamp\": \"2026-01-19T19:48:09Z\", \"issue_id\": \"yolo-runner-127.4.7\", \"title\": \"v1.2: Detect default root (avoid hardcoded algi-8bt)\", \"status\": \"blocked\", \"commit_sha\": \"361277ed2e0f8f9ae1a7b1adf09ae2c7168c4c26\"}\n+{\"timestamp\": \"2026-01-19T19:52:41Z\", \"issue_id\": \"yolo-runner-127.4.5\", \"title\": \"v1.2: Detect OpenCode log growth for heartbeat\", \"status\": \"completed\", \"commit_sha\": \"03cc0beaae40d47e575620c0cbd3a425255c9568\"}\n","exit":0,"description":"Shows git diff","truncated":false},"time":{"start":1768841612281,"end":1768841612292}},"metadata":{"openai":{"itemId":"fc_0c133d98fad74f3a01696e618c0e248191b21603eaf04cd9fc"}}}}
{"type":"tool_use","timestamp":1768841612575,"sessionID":"ses_428d3a351ffey4Uy5GHqwPlnuM","part":{"id":"prt_bd72d0bfa001mrjXQoH4q1mFzq","sessionID":"ses_428d3a351ffey4Uy5GHqwPlnuM","messageID":"msg_bd72cfb57001NmcSybVRrGQJF1","type":"tool","callID":"call_togDpP8TEUm7laDxCdVIXtep","tool":"bash","state":{"status":"completed","input":{"command":"git log -5 --oneline","workdir":"/Users/egv/dev/yolo-runner","description":"Shows recent git commits"},"output":"80b9cb7 bd sync: 2026-01-19 19:52:44\n03cc0be feat: v1.2: detect opencode log growth for heartbeat\n74d9770 feat: detect opencode log growth\n361277e chore: close yolo-runner-127.4.7\n3aa1860 feat: detect default root\n","title":"Shows recent git commits","metadata":{"output":"80b9cb7 bd sync: 2026-01-19 19:52:44\n03cc0be feat: v1.2: detect opencode log growth for heartbeat\n74d9770 feat: detect opencode log growth\n361277e chore: close yolo-runner-127.4.7\n3aa1860 feat: detect default root\n","exit":0,"description":"Shows recent git commits","truncated":false},"time":{"start":1768841612566,"end":1768841612574}},"metadata":{"openai":{"itemId":"fc_0c133d98fad74f3a01696e618c45d08191a2ce89b5bcb84a42"}}}}
{"type":"step_finish","timestamp":1768841612617,"sessionID":"ses_428d3a351ffey4Uy5GHqwPlnuM","part":{"id":"prt_bd72d0d3b001nbec9YjJ62DK8K","sessionID":"ses_428d3a351ffey4Uy5GHqwPlnuM","messageID":"msg_bd72cfb57001NmcSybVRrGQJF1","type":"step-finish","reason":"tool-calls","snapshot":"e6aba4f03bcb7ad707762cd3f3400fc915c02a64","cost":0,"tokens":{"input":172,"output":135,"reasoning":0,"cache":{"read":4352,"write":0}}}}
{"type":"step_start","timestamp":1768841612934,"sessionID":"ses_428d3a351ffey4Uy5GHqwPlnuM","part":{"id":"prt_bd72d0e85001xZhshVnmtOT3Mv","sessionID":"ses_428d3a351ffey4Uy5GHqwPlnuM","messageID":"msg_bd72d0d59001Kf37lIQE6qxuXF","type":"step-start","snapshot":"f355daf056d39e18c2edfe3de3b8295f4060acc8"}}
{"type":"tool_use","timestamp":1768841625115,"sessionID":"ses_428d3a351ffey4Uy5GHqwPlnuM","part":{"id":"prt_bd72d3975001NG36lIEEAYlijx","sessionID":"ses_428d3a351ffey4Uy5GHqwPlnuM","messageID":"msg_bd72d0d59001Kf37lIQE6qxuXF","type":"tool","callID":"call_pA4HuAePEdHGoHOreAam2x1l","tool":"bash","state":{"status":"completed","input":{"command":"git add README.md build_docs_test.go && git commit -m \"feat: update readme for tui/headless\" && git status --short","workdir":"/Users/egv/dev/yolo-runner","description":"Stages files, commits, shows status"},"output":"[rewind/v1-go-cleanup 15b85be] feat: update readme for tui/headless\n 3 files changed, 30 insertions(+), 1 deletion(-)\n M runner-logs/beads_yolo_runner.jsonl\n?? runner-logs/opencode/yolo-runner-127.4.6.jsonl\n","title":"Stages files, commits, shows status","metadata":{"output":"[rewind/v1-go-cleanup 15b85be] feat: update readme for tui/headless\n 3 files changed, 30 insertions(+), 1 deletion(-)\n M runner-logs/beads_yolo_runner.jsonl\n?? runner-logs/opencode/yolo-runner-127.4.6.jsonl\n","exit":0,"description":"Stages files, commits, shows status","truncated":false},"time":{"start":1768841624865,"end":1768841625114}},"metadata":{"openai":{"itemId":"fc_0b1c4966802a7c0e01696e6197eb0081919131d43d57014f8d"}}}}
{"type":"step_finish","timestamp":1768841625131,"sessionID":"ses_428d3a351ffey4Uy5GHqwPlnuM","part":{"id":"prt_bd72d3e1b001TAT7zwwn55XngJ","sessionID":"ses_428d3a351ffey4Uy5GHqwPlnuM","messageID":"msg_bd72d0d59001Kf37lIQE6qxuXF","type":"step-finish","reason":"tool-calls","snapshot":"3b527e539b03e32b515cc3aab4452a005161cd2f","cost":0,"tokens":{"input":4908,"output":456,"reasoning":384,"cache":{"read":12928,"write":0}}}}
{"type":"step_start","timestamp":1768841625544,"sessionID":"ses_428d3a351ffey4Uy5GHqwPlnuM","part":{"id":"prt_bd72d3fc8001WqE3GR9ZlwV86E","sessionID":"ses_428d3a351ffey4Uy5GHqwPlnuM","messageID":"msg_bd72d3e3c001HmTmEYJd33ZvP7","type":"step-start","snapshot":"f5b88c70dd5de15e974c18c7ce064513c2f0dd46"}}
{"type":"tool_use","timestamp":1768841629225,"sessionID":"ses_428d3a351ffey4Uy5GHqwPlnuM","part":{"id":"prt_bd72d4b72001vUrEP8dhr6050y","sessionID":"ses_428d3a351ffey4Uy5GHqwPlnuM","messageID":"msg_bd72d3e3c001HmTmEYJd33ZvP7","type":"tool","callID":"call_hxJjNXT3lA5pr9twMvIRDdxX","tool":"bash","state":{"status":"completed","input":{"command":"git show --stat --oneline -1","workdir":"/Users/egv/dev/yolo-runner","description":"Shows latest commit with stats"},"output":"15b85be feat: update readme for tui/headless\n .beads/issues.jsonl |  2 +-\n README.md           |  3 +++\n build_docs_test.go  | 26 ++++++++++++++++++++++++++\n 3 files changed, 30 insertions(+), 1 deletion(-)\n","title":"Shows latest commit with stats","metadata":{"output":"15b85be feat: update readme for tui/headless\n .beads/issues.jsonl |  2 +-\n README.md           |  3 +++\n build_docs_test.go  | 26 ++++++++++++++++++++++++++\n 3 files changed, 30 insertions(+), 1 deletion(-)\n","exit":0,"description":"Shows latest commit with stats","truncated":false},"time":{"start":1768841629214,"end":1768841629224}},"metadata":{"openai":{"itemId":"fc_07d56bc0751bfc8001696e619c7a50819199fba39ba1d908c1"}}}}
{"type":"step_finish","timestamp":1768841629288,"sessionID":"ses_428d3a351ffey4Uy5GHqwPlnuM","part":{"id":"prt_bd72d4e59001Hbhu0XPsbH7LRq","sessionID":"ses_428d3a351ffey4Uy5GHqwPlnuM","messageID":"msg_bd72d3e3c001HmTmEYJd33ZvP7","type":"step-finish","reason":"tool-calls","snapshot":"90cf50f961a52ca3a303637dbbbb29a5a7bb24a7","cost":0,"tokens":{"input":961,"output":114,"reasoning":64,"cache":{"read":17024,"write":0}}}}
{"type":"step_start","timestamp":1768841629643,"sessionID":"ses_428d3a351ffey4Uy5GHqwPlnuM","part":{"id":"prt_bd72d4fca001q9bidaXvieU4Ww","sessionID":"ses_428d3a351ffey4Uy5GHqwPlnuM","messageID":"msg_bd72d4e78001sEEOo7eSqL5MTm","type":"step-start","snapshot":"2003020c3f6b69e6098537208903e4a4bab091eb"}}
{"type":"tool_use","timestamp":1768841662521,"sessionID":"ses_428d3a351ffey4Uy5GHqwPlnuM","part":{"id":"prt_bd72dcd83001XW8QFDtj0H9AGI","sessionID":"ses_428d3a351ffey4Uy5GHqwPlnuM","messageID":"msg_bd72d4e78001sEEOo7eSqL5MTm","type":"tool","callID":"call_2fW5YMb3rR5Bv5Tr70cFsFlk","tool":"read","state":{"status":"completed","input":{"filePath":"/Users/egv/dev/yolo-runner/.beads/issues.jsonl"},"output":"<file>\n00001| {\"id\":\"yolo-runner-127\",\"title\":\"Roadmap\",\"description\":\"Top-level roadmap for yolo-runner versions. Keeps v1/v2/v3 work separated via parent-child structure.\",\"acceptance_criteria\":\"- Roadmap contains child epics for v1, v2, v3\\n- Running bd ready --parent \\u003croadmap\\u003e shows next version work in order\",\"status\":\"open\",\"priority\":0,\"issue_type\":\"epic\",\"owner\":\"g.evstratov@gmail.com\",\"created_at\":\"2026-01-18T21:57:33.902592+03:00\",\"created_by\":\"Gennady Evstratov\",\"updated_at\":\"2026-01-18T21:57:33.902592+03:00\"}\n00002| {\"id\":\"yolo-runner-127.1\",\"title\":\"v1.2: Runner supports beads molecules\",\"description\":\"Deferred: add beads molecule traversal support to Go runner selection.\\n\\nSelection semantics:\\n- Container issue types: epic, molecule\\n- Container traversable statuses: open OR in_progress\\n- Leaf task selectable statuses: open only\\n\\nNote:\\n- We are prioritizing runner observability (logging/TUI/watchdog) first.\",\"acceptance_criteria\":\"- Given epic-\\u003emolecule-\\u003etask trees, selection traverses molecules like epics\\n- Containers traversed when status is open or in_progress\\n- Leaf tasks selected only when status is open\\n- go test ./... passes\",\"status\":\"open\",\"priority\":3,\"issue_type\":\"epic\",\"owner\":\"g.evstratov@gmail.com\",\"created_at\":\"2026-01-18T23:31:02.344149+03:00\",\"created_by\":\"Gennady Evstratov\",\"updated_at\":\"2026-01-19T16:24:05.18764+03:00\",\"dependencies\":[{\"issue_id\":\"yolo-runner-127.1\",\"depends_on_id\":\"yolo-runner-127\",\"type\":\"parent-child\",\"created_at\":\"2026-01-18T23:31:02.34471+03:00\",\"created_by\":\"Gennady Evstratov\"},{\"issue_id\":\"yolo-runner-127.1\",\"depends_on_id\":\"yolo-runner-127.4\",\"type\":\"blocks\",\"created_at\":\"2026-01-19T16:32:53.969739+03:00\",\"created_by\":\"Gennady Evstratov\"}]}\n00003| {\"id\":\"yolo-runner-127.1.1\",\"title\":\"v1.1: Selection recurses into molecules\",\"description\":\"Update Python runner selection logic so issue_type==molecule is treated like issue_type==epic for recursion.\",\"acceptance_criteria\":\"- Given a root epic whose first open leaf task is under a molecule, when selecting, then it returns the correct task id\\n- Given both epic and molecule containers exist, when selecting, then both are traversed\\n- Given a molecule has no children, when selecting, then it is skipped\\n- Add tests that fail before the change and pass after\",\"status\":\"closed\",\"priority\":1,\"issue_type\":\"task\",\"owner\":\"g.evstratov@gmail.com\",\"created_at\":\"2026-01-18T23:31:08.240732+03:00\",\"created_by\":\"Gennady Evstratov\",\"updated_at\":\"2026-01-19T11:07:58.059975+03:00\",\"closed_at\":\"2026-01-19T11:07:58.059975+03:00\",\"close_reason\":\"Out of scope for v1.1 (Go-only)\",\"dependencies\":[{\"issue_id\":\"yolo-runner-127.1.1\",\"depends_on_id\":\"yolo-runner-127.1\",\"type\":\"parent-child\",\"created_at\":\"2026-01-18T23:31:08.241324+03:00\",\"created_by\":\"Gennady Evstratov\"}]}\n00004| {\"id\":\"yolo-runner-127.1.2\",\"title\":\"v1.1: Go runner selection supports molecules\",\"description\":\"Implement Go selection molecule support.\\n\\nFiles:\\n- Modify: internal/runner/select.go\\n- Modify: internal/runner/select_test.go\\n\\nRules:\\n- Must be Go only (no new Python files)\\n- Do not modify beads_yolo_runner.py in v1.1\\n\\nSelection semantics:\\n- Treat issue_type in {\\\"epic\\\",\\\"molecule\\\"} as container nodes\\n- Recurse into container nodes when container status is open OR in_progress\\n- Leaf tasks are eligible only when status == open\\n\\nAcceptance:\\n- Given epic-\\u003emolecule(open)-\\u003etask(open), selection returns the task id\\n- Given epic-\\u003emolecule(in_progress)-\\u003etask(open), selection returns the task id\\n- Given epic-\\u003emolecule(open, empty)-\\u003etask(open), selection skips empty molecule and returns the task\\n- Leaf tasks are selected only when status=open\\n- go test ./... passes\",\"acceptance_criteria\":\"- Given epic-\\u003emolecule(open)-\\u003etask(open), selection returns the task id\\n- Given epic-\\u003emolecule(in_progress)-\\u003etask(open), selection returns the task id\\n- Given epic-\\u003emolecule(open, empty)-\\u003etask(open), selection skips empty molecule and returns the task\\n- Leaf tasks are selected only when status=open\\n- go test ./... passes\",\"status\":\"open\",\"priority\":1,\"issue_type\":\"task\",\"owner\":\"g.evstratov@gmail.com\",\"created_at\":\"2026-01-18T23:31:10.652593+03:00\",\"created_by\":\"Gennady Evstratov\",\"updated_at\":\"2026-01-19T16:33:14.126492+03:00\",\"dependencies\":[{\"issue_id\":\"yolo-runner-127.1.2\",\"depends_on_id\":\"yolo-runner-127.1\",\"type\":\"parent-child\",\"created_at\":\"2026-01-18T23:31:10.653195+03:00\",\"created_by\":\"Gennady Evstratov\"}]}\n00005| {\"id\":\"yolo-runner-127.1.3\",\"title\":\"v1.1: Document molecule selection semantics\",\"description\":\"Document selection semantics for epic/molecule traversal.\\n\\nFiles:\\n- Modify: README.md\\n\\nAcceptance:\\n- README explains: container types (epic,molecule), traversable statuses (open,in_progress), leaf eligibility (open only)\",\"acceptance_criteria\":\"- README explains: container types (epic,molecule), traversable statuses (open,in_progress), leaf eligibility (open only)\",\"status\":\"open\",\"priority\":2,\"issue_type\":\"task\",\"owner\":\"g.evstratov@gmail.com\",\"created_at\":\"2026-01-19T11:07:58.135303+03:00\",\"created_by\":\"Gennady Evstratov\",\"updated_at\":\"2026-01-19T11:07:58.135303+03:00\",\"dependencies\":[{\"issue_id\":\"yolo-runner-127.1.3\",\"depends_on_id\":\"yolo-runner-127.1\",\"type\":\"parent-child\",\"created_at\":\"2026-01-19T11:07:58.135883+03:00\",\"created_by\":\"Gennady Evstratov\"}]}\n00006| {\"id\":\"yolo-runner-127.2\",\"title\":\"v1.2: Console Progress Output\",\"description\":\"Add human-friendly console output to the Go runner so it is obvious what it is doing and whether it is hung.\\n\\nScope:\\n- Print current task id/title\\n- Print phase transitions (bd, opencode, git, sync)\\n- Show a heartbeat/spinner while OpenCode runs\\n\\nNon-goals:\\n- No TUI, no curses. Plain stdout/stderr only.\",\"acceptance_criteria\":\"- Given the Go runner is executing, it prints which task is being processed and the final outcome (completed/blocked/error)\\n- Given OpenCode is running, the runner prints periodic heartbeat output so it does not look hung\\n- Given git/bd operations run, the runner prints phase messages (commit/sync/close)\\n- go test ./... passes\",\"status\":\"open\",\"priority\":2,\"issue_type\":\"epic\",\"owner\":\"g.evstratov@gmail.com\",\"created_at\":\"2026-01-19T11:20:28.034824+03:00\",\"created_by\":\"Gennady Evstratov\",\"updated_at\":\"2026-01-19T15:54:59.339847+03:00\",\"dependencies\":[{\"issue_id\":\"yolo-runner-127.2\",\"depends_on_id\":\"yolo-runner-127\",\"type\":\"parent-child\",\"created_at\":\"2026-01-19T11:20:28.035498+03:00\",\"created_by\":\"Gennady Evstratov\"},{\"issue_id\":\"yolo-runner-127.2\",\"depends_on_id\":\"yolo-runner-127.1\",\"type\":\"blocks\",\"created_at\":\"2026-01-19T11:20:28.116396+03:00\",\"created_by\":\"Gennady Evstratov\"}]}\n00007| {\"id\":\"yolo-runner-127.2.1\",\"title\":\"v1.2: Print task start/end/result\",\"description\":\"Print minimal lifecycle lines to stdout.\\n\\nBehavior:\\n- Maintain a single \\\"current state\\\" string for the run (e.g. selecting task, bd update, opencode running, git commit, bd sync).\\n- Print at least:\\n  - Start: \\\"Starting \\u003cid\\u003e: \\u003ctitle\\u003e\\\"\\n  - State transitions: \\\"State: \\u003cstate\\u003e\\\" (one line per transition)\\n  - End: \\\"Finished \\u003cid\\u003e: \\u003cresult\\u003e (\\u003celapsed\\u003e)\\\"\\n\\nFiles:\\n- Modify: cmd/yolo-runner/main.go\\n- Modify: internal/runner/runner.go\\n\\nRules:\\n- Go only\\n\\nAcceptance:\\n- Start line includes issue id and title\\n- State transitions print a readable state string\\n- End line includes result and elapsed\\n- No-tasks case prints message and exits 0\\n- go test ./... passes\",\"acceptance_criteria\":\"- Start line includes issue id and title\\n- Prints state string on transitions\\n- End line includes result and elapsed\\n- No-tasks case prints message\\n- go test ./... passes\",\"status\":\"open\",\"priority\":1,\"issue_type\":\"task\",\"owner\":\"g.evstratov@gmail.com\",\"created_at\":\"2026-01-19T11:20:28.196159+03:00\",\"created_by\":\"Gennady Evstratov\",\"updated_at\":\"2026-01-19T15:37:19.423758+03:00\",\"dependencies\":[{\"issue_id\":\"yolo-runner-127.2.1\",\"depends_on_id\":\"yolo-runner-127.2\",\"type\":\"parent-child\",\"created_at\":\"2026-01-19T11:20:28.196994+03:00\",\"created_by\":\"Gennady Evstratov\"}]}\n00008| {\"id\":\"yolo-runner-127.2.2\",\"title\":\"v1.2: Print phase messages for bd/git operations\",\"description\":\"Print clear, Claude-Code-style phase messages and command echoes so users see exactly what is happening.\\n\\nBehavior:\\n- Before each external command, print: \\\"$ \\u003ccommand\\u003e\\\" (single line)\\n- After the command, print: \\\"ok\\\" or \\\"failed\\\" plus exit code and elapsed time\\n- Cover at least:\\n  - bd show/ready/update/close/sync\\n  - opencode run (show the exact command line)\\n  - git status/add/commit/rev-parse\\n  - go test ./... (when invoked by runner, if applicable)\\n\\nFiles:\\n- Modify: internal/runner/runner.go\\n- Modify (if needed): internal/opencode/client.go\\n- Modify (if needed): internal/vcs/git/git.go\\n- Modify (if needed): internal/beads/client.go\\n\\nRules:\\n- Go only\\n\\nAcceptance:\\n- Output contains \\\"$ \\u003ccommand\\u003e\\\" line for each command listed above\\n- Output prints per-command outcome (ok/failed), exit code, and elapsed\\n- On errors, output shows which command failed\\n- go test ./... passes\",\"acceptance_criteria\":\"- Echoes each external command before running\\n- Prints ok/failed + exit code + elapsed\\n- Covers bd/opencode/git commands\\n- go test ./... passes\",\"status\":\"open\",\"priority\":1,\"issue_type\":\"task\",\"owner\":\"g.evstratov@gmail.com\",\"created_at\":\"2026-01-19T11:20:28.277062+03:00\",\"created_by\":\"Gennady Evstratov\",\"updated_at\":\"2026-01-19T15:36:46.121044+03:00\",\"dependencies\":[{\"issue_id\":\"yolo-runner-127.2.2\",\"depends_on_id\":\"yolo-runner-127.2\",\"type\":\"parent-child\",\"created_at\":\"2026-01-19T11:20:28.277627+03:00\",\"created_by\":\"Gennady Evstratov\"}]}\n00009| {\"id\":\"yolo-runner-127.2.3\",\"title\":\"v1.2: OpenCode heartbeat while logs grow\",\"description\":\"While OpenCode runs, print a compact heartbeat/spinner that proves the process is alive.\\n\\nBehavior:\\n- Keep a \\\"current state\\\" string (e.g. \\\"opencode running\\\") and print it alongside the spinner.\\n- Spinner should advance (beat) when new bytes are appended to runner-logs/opencode/\\u003cissue\\u003e.jsonl.\\n- Also print last-output age (seconds) so stalls are obvious.\\n- Must not spam: render on the SAME terminal line using carriage return (CR, \\r). Only print a newline when:\\n  - the state changes, or\\n  - OpenCode finishes, or\\n  - an error occurs.\\n\\nFiles:\\n- Create: internal/ui/progress.go (or similar)\\n- Modify: internal/opencode/client.go (or call-site in internal/runner/runner.go)\\n\\nRules:\\n- Go only\\n\\nAcceptance:\\n- Given OpenCode runs for \\u003e5s, stdout shows spinner output with current state\\n- Spinner advances on new output bytes\\n- Output is updated in-place (CR) rather than printing new lines repeatedly\\n- Shows last-output age seconds to detect hangs\\n- On completion, prints a final newline and \\\"OpenCode finished\\\" line\\n- go test ./... passes\",\"acceptance_criteria\":\"- Spinner prints during opencode execution with current state\\n- Spinner advances on new output bytes\\n- Uses CR to update in-place (no spam)\\n- Shows last-output age seconds to detect hangs\\n- Stops on completion and prints newline\\n- go test ./... passes\",\"status\":\"open\",\"priority\":1,\"issue_type\":\"task\",\"owner\":\"g.evstratov@gmail.com\",\"created_at\":\"2026-01-19T11:20:28.353994+03:00\",\"created_by\":\"Gennady Evstratov\",\"updated_at\":\"2026-01-19T15:40:14.104014+03:00\",\"dependencies\":[{\"issue_id\":\"yolo-runner-127.2.3\",\"depends_on_id\":\"yolo-runner-127.2\",\"type\":\"parent-child\",\"created_at\":\"2026-01-19T11:20:28.354624+03:00\",\"created_by\":\"Gennady Evstratov\"}]}\n00010| {\"id\":\"yolo-runner-127.2.4\",\"title\":\"v1.2: Add tests for console output\",\"description\":\"Add unit tests that assert key output lines are printed.\\n\\nFiles:\\n- Modify: internal/runner/runner_test.go\\n- Modify: cmd/yolo-runner/main_test.go\\n\\nRules:\\n- Go only\\n\\nAcceptance:\\n- Tests cover: start line, end line, and at least one phase line\\n- Tests do not depend on timing; heartbeat should be testable via injected ticker/clock or a stubbed progress reporter\\n- go test ./... passes\",\"acceptance_criteria\":\"- Tests assert lifecycle output\\n- Heartbeat testing is deterministic\\n- go test ./... passes\",\"status\":\"open\",\"priority\":2,\"issue_type\":\"task\",\"owner\":\"g.evstratov@gmail.com\",\"created_at\":\"2026-01-19T11:20:28.431154+03:00\",\"created_by\":\"Gennady Evstratov\",\"updated_at\":\"2026-01-19T11:20:28.431154+03:00\",\"dependencies\":[{\"issue_id\":\"yolo-runner-127.2.4\",\"depends_on_id\":\"yolo-runner-127.2\",\"type\":\"parent-child\",\"created_at\":\"2026-01-19T11:20:28.431791+03:00\",\"created_by\":\"Gennady Evstratov\"}]}\n00011| {\"id\":\"yolo-runner-127.2.5\",\"title\":\"v1.2: Document console output and troubleshooting\",\"description\":\"Document what users should see, and where to look when it appears stuck.\\n\\nFiles:\\n- Modify: README.md\\n\\nAcceptance:\\n- README includes sample output snippet\\n- README includes: how to tail opencode log and how to identify current task\\n- go test ./... passes\",\"acceptance_criteria\":\"- README includes sample output + troubleshooting pointers\",\"status\":\"open\",\"priority\":3,\"issue_type\":\"task\",\"owner\":\"g.evstratov@gmail.com\",\"created_at\":\"2026-01-19T11:20:28.50869+03:00\",\"created_by\":\"Gennady Evstratov\",\"updated_at\":\"2026-01-19T11:20:28.50869+03:00\",\"dependencies\":[{\"issue_id\":\"yolo-runner-127.2.5\",\"depends_on_id\":\"yolo-runner-127.2\",\"type\":\"parent-child\",\"created_at\":\"2026-01-19T11:20:28.509294+03:00\",\"created_by\":\"Gennady Evstratov\"}]}\n00012| {\"id\":\"yolo-runner-127.3\",\"title\":\"v1.2: Init Command + YOLO Agent Guard\",\"description\":\"Add a runner init command that installs the YOLO agent into the project OpenCode configuration, and make the runner refuse to start if the YOLO agent is missing.\\n\\nDesign:\\n- Project-local (no system-wide install)\\n- init overwrites .opencode/agent/yolo.md to match yolo.md (source of truth)\\n- Runner validates agent presence before doing any work\\n\\nNon-goals:\\n- Managing other agents\\n- Editing user global opencode config\",\"acceptance_criteria\":\"- Given .opencode/agent/yolo.md is missing, when running yolo-runner (non-init), then it exits non-zero with a clear message and does not modify beads/git\\n- Given yolo.md exists, when running yolo-runner init, then it creates or overwrites .opencode/agent/yolo.md to match yolo.md\\n- Given init ran, when running yolo-runner, then it proceeds normally (no agent-not-found)\\n- go test ./... passes\",\"status\":\"open\",\"priority\":2,\"issue_type\":\"epic\",\"owner\":\"g.evstratov@gmail.com\",\"created_at\":\"2026-01-19T15:19:49.466284+03:00\",\"created_by\":\"Gennady Evstratov\",\"updated_at\":\"2026-01-19T15:19:49.466284+03:00\",\"dependencies\":[{\"issue_id\":\"yolo-runner-127.3\",\"depends_on_id\":\"yolo-runner-127\",\"type\":\"parent-child\",\"created_at\":\"2026-01-19T15:19:49.468097+03:00\",\"created_by\":\"Gennady Evstratov\"},{\"issue_id\":\"yolo-runner-127.3\",\"depends_on_id\":\"yolo-runner-127.1\",\"type\":\"blocks\",\"created_at\":\"2026-01-19T15:19:49.527131+03:00\",\"created_by\":\"Gennady Evstratov\"}]}\n00013| {\"id\":\"yolo-runner-127.3.1\",\"title\":\"v1.2: Refuse to run if YOLO agent missing\",\"description\":\"Before selecting any beads task, validate the YOLO agent is installed for this repo.\\n\\nFiles:\\n- Modify: cmd/yolo-runner/main.go\\n- Create: internal/opencode/agent.go\\n- Create: internal/opencode/agent_test.go\\n\\nRules:\\n- Go only\\n\\nAcceptance:\\n- If .opencode/agent/yolo.md does not exist, runner exits non-zero and prints a clear message\\n- If agent file exists but does not contain frontmatter key permission: allow, runner exits non-zero and prints guidance to run init\\n- Validation happens before any bd update / git add / opencode run\\n- go test ./... passes\",\"acceptance_criteria\":\"- Missing agent file fails fast with clear message\\n- Missing permission allow fails fast with guidance\\n- Validation runs before any mutations\\n- go test ./... passes\",\"status\":\"open\",\"priority\":1,\"issue_type\":\"task\",\"owner\":\"g.evstratov@gmail.com\",\"created_at\":\"2026-01-19T15:19:49.598338+03:00\",\"created_by\":\"Gennady Evstratov\",\"updated_at\":\"2026-01-19T15:19:49.598338+03:00\",\"dependencies\":[{\"issue_id\":\"yolo-runner-127.3.1\",\"depends_on_id\":\"yolo-runner-127.3\",\"type\":\"parent-child\",\"created_at\":\"2026-01-19T15:19:49.598929+03:00\",\"created_by\":\"Gennady Evstratov\"}]}\n00014| {\"id\":\"yolo-runner-127.3.2\",\"title\":\"v1.2: Add init subcommand to install YOLO agent\",\"description\":\"Add an init command to the Go runner that installs the YOLO agent into the project OpenCode config.\\n\\nCommand:\\n- yolo-runner init\\n\\nBehavior:\\n- Create .opencode/agent/ if needed\\n- Copy yolo.md -\\u003e .opencode/agent/yolo.md\\n- Overwrite existing .opencode/agent/yolo.md to match yolo.md\\n\\nFiles:\\n- Modify: cmd/yolo-runner/main.go\\n- Modify: cmd/yolo-runner/main_test.go\\n- Modify: internal/opencode/agent.go\\n\\nRules:\\n- Go only\\n\\nAcceptance:\\n- Running yolo-runner init creates/overwrites .opencode/agent/yolo.md\\n- After init, yolo-runner run mode no longer errors on missing agent\\n- go test ./... passes\",\"acceptance_criteria\":\"- init creates/overwrites agent file\\n- run mode passes agent validation after init\\n- go test ./... passes\",\"status\":\"open\",\"priority\":1,\"issue_type\":\"task\",\"owner\":\"g.evstratov@gmail.com\",\"created_at\":\"2026-01-19T15:19:49.67363+03:00\",\"created_by\":\"Gennady Evstratov\",\"updated_at\":\"2026-01-19T15:19:49.67363+03:00\",\"dependencies\":[{\"issue_id\":\"yolo-runner-127.3.2\",\"depends_on_id\":\"yolo-runner-127.3\",\"type\":\"parent-child\",\"created_at\":\"2026-01-19T15:19:49.674108+03:00\",\"created_by\":\"Gennady Evstratov\"}]}\n00015| {\"id\":\"yolo-runner-127.3.3\",\"title\":\"v1.2: Document init + agent requirements\",\"description\":\"Document how agent installation works and how to recover when the runner refuses to start.\\n\\nFiles:\\n- Modify: README.md\\n\\nAcceptance:\\n- README documents yolo-runner init\\n- README explains why runner refuses to start if agent missing\\n- README includes troubleshooting steps\\n- go test ./... passes\",\"acceptance_criteria\":\"- README includes init usage and troubleshooting\",\"status\":\"open\",\"priority\":2,\"issue_type\":\"task\",\"owner\":\"g.evstratov@gmail.com\",\"created_at\":\"2026-01-19T15:19:49.747947+03:00\",\"created_by\":\"Gennady Evstratov\",\"updated_at\":\"2026-01-19T15:19:49.747947+03:00\",\"dependencies\":[{\"issue_id\":\"yolo-runner-127.3.3\",\"depends_on_id\":\"yolo-runner-127.3\",\"type\":\"parent-child\",\"created_at\":\"2026-01-19T15:19:49.748579+03:00\",\"created_by\":\"Gennady Evstratov\"}]}\n00016| {\"id\":\"yolo-runner-127.4\",\"title\":\"v1.1: Observability (TUI + watchdog + init/guards)\",\"description\":\"Make the runner robust and observable before adding molecule traversal.\\n\\nIncludes:\\n- Bubble Tea TUI progress UI (TTY by default, with --headless)\\n- Watchdog to detect and fail-fast on OpenCode stalls, with evidence\\n- Init/guards to ensure YOLO agent is installed and permissions allow non-interactive runs\\n- Fix default --root behavior (avoid hardcoded algi-8bt)\\n\\nAll implementation must be Go.\",\"acceptance_criteria\":\"- Runner does not hang indefinitely on OpenCode stalls (watchdog)\\n- Runner has clear progress output (TUI on TTY, --headless for logs)\\n- Runner refuses to start if YOLO agent missing; init installs it\\n- Default root is inferred or runner errors clearly\\n- go test ./... passes\",\"status\":\"open\",\"priority\":1,\"issue_type\":\"epic\",\"owner\":\"g.evstratov@gmail.com\",\"created_at\":\"2026-01-19T15:55:27.038426+03:00\",\"created_by\":\"Gennady Evstratov\",\"updated_at\":\"2026-01-19T16:24:16.935052+03:00\",\"dependencies\":[{\"issue_id\":\"yolo-runner-127.4\",\"depends_on_id\":\"yolo-runner-127\",\"type\":\"parent-child\",\"created_at\":\"2026-01-19T15:55:27.039062+03:00\",\"created_by\":\"Gennady Evstratov\"}]}\n00017| {\"id\":\"yolo-runner-127.4.1\",\"title\":\"v1.2: Add Bubble Tea dependency\",\"description\":\"Add Bubble Tea dependencies and minimal wiring.\\n\\nFiles:\\n- Modify: go.mod\\n- Modify: go.sum\\n\\nAcceptance:\\n- go test ./... passes\\n- Bubble Tea module is added and buildable\",\"acceptance_criteria\":\"- go test ./... passes\\n- Bubble Tea module is added and buildable\",\"status\":\"closed\",\"priority\":1,\"issue_type\":\"task\",\"owner\":\"g.evstratov@gmail.com\",\"created_at\":\"2026-01-19T15:55:27.195836+03:00\",\"created_by\":\"Gennady Evstratov\",\"updated_at\":\"2026-01-19T18:59:10.354843+03:00\",\"closed_at\":\"2026-01-19T18:59:10.354843+03:00\",\"close_reason\":\"Closed\",\"dependencies\":[{\"issue_id\":\"yolo-runner-127.4.1\",\"depends_on_id\":\"yolo-runner-127.4\",\"type\":\"parent-child\",\"created_at\":\"2026-01-19T15:55:27.196499+03:00\",\"created_by\":\"Gennady Evstratov\"}]}\n00018| {\"id\":\"yolo-runner-127.4.2\",\"title\":\"v1.2: TUI model for runner status\",\"description\":\"Implement a Bubble Tea model that renders:\\n- current task (id + title)\\n- current phase/state string\\n- spinner that advances when new output is detected\\n- last-output age seconds\\n\\nFiles:\\n- Create: internal/ui/tui/model.go\\n- Create: internal/ui/tui/model_test.go\\n\\nAcceptance:\\n- Given status updates, view output contains task id/title and phase string\\n- Spinner advances when notified of new output\\n- Tests run without requiring a real TTY\\n- go test ./... passes\",\"acceptance_criteria\":\"- Renders task and phase\\n- Spinner advances on output events\\n- Tests are deterministic and non-TTY\\n- go test ./... passes\",\"status\":\"closed\",\"priority\":1,\"issue_type\":\"task\",\"owner\":\"g.evstratov@gmail.com\",\"created_at\":\"2026-01-19T15:55:27.275855+03:00\",\"created_by\":\"Gennady Evstratov\",\"updated_at\":\"2026-01-19T19:02:37.853373+03:00\",\"closed_at\":\"2026-01-19T19:02:37.853373+03:00\",\"close_reason\":\"Closed\",\"dependencies\":[{\"issue_id\":\"yolo-runner-127.4.2\",\"depends_on_id\":\"yolo-runner-127.4\",\"type\":\"parent-child\",\"created_at\":\"2026-01-19T15:55:27.276643+03:00\",\"created_by\":\"Gennady Evstratov\"}]}\n00019| {\"id\":\"yolo-runner-127.4.3\",\"title\":\"v1.2: Wire runner phases into TUI\",\"description\":\"Plumb runner phase/state updates into the TUI.\\n\\nFiles:\\n- Modify: internal/runner/runner.go\\n- Create: internal/runner/events.go\\n\\nAcceptance:\\n- Runner emits structured events for: selecting task, bd update, opencode start/end, git add/status/commit, bd close/verify, bd sync\\n- TUI displays current phase based on latest event\\n- go test ./... passes\",\"acceptance_criteria\":\"- Runner emits phase events\\n- TUI updates from events\\n- go test ./... passes\",\"status\":\"closed\",\"priority\":1,\"issue_type\":\"task\",\"owner\":\"g.evstratov@gmail.com\",\"created_at\":\"2026-01-19T15:55:27.357111+03:00\",\"created_by\":\"Gennady Evstratov\",\"updated_at\":\"2026-01-19T19:24:34.458796+03:00\",\"closed_at\":\"2026-01-19T19:24:34.458796+03:00\",\"close_reason\":\"Closed\",\"dependencies\":[{\"issue_id\":\"yolo-runner-127.4.3\",\"depends_on_id\":\"yolo-runner-127.4\",\"type\":\"parent-child\",\"created_at\":\"2026-01-19T15:55:27.357695+03:00\",\"created_by\":\"Gennady Evstratov\"}]}\n00020| {\"id\":\"yolo-runner-127.4.4\",\"title\":\"v1.2: Headless mode flag\",\"description\":\"Add CLI flag --headless to force plain output (no Bubble Tea), even when stdout is a TTY.\\n\\nFiles:\\n- Modify: cmd/yolo-runner/main.go\\n- Modify: cmd/yolo-runner/main_test.go\\n\\nAcceptance:\\n- Given stdout is a TTY, default is TUI\\n- Given --headless, runner does not start Bubble Tea\\n- go test ./... passes\",\"acceptance_criteria\":\"- Default TUI on TTY\\n- --headless disables TUI\\n- go test ./... passes\",\"status\":\"closed\",\"priority\":1,\"issue_type\":\"task\",\"owner\":\"g.evstratov@gmail.com\",\"created_at\":\"2026-01-19T15:55:27.438163+03:00\",\"created_by\":\"Gennady Evstratov\",\"updated_at\":\"2026-01-19T19:41:31.309652+03:00\",\"closed_at\":\"2026-01-19T19:41:31.309652+03:00\",\"close_reason\":\"Closed\",\"dependencies\":[{\"issue_id\":\"yolo-runner-127.4.4\",\"depends_on_id\":\"yolo-runner-127.4\",\"type\":\"parent-child\",\"created_at\":\"2026-01-19T15:55:27.438678+03:00\",\"created_by\":\"Gennady Evstratov\"}]}\n00021| {\"id\":\"yolo-runner-127.4.5\",\"title\":\"v1.2: Detect OpenCode log growth for heartbeat\",\"description\":\"Implement a watcher that polls the per-task OpenCode JSONL log file size and sends an event when it grows.\\n\\nFiles:\\n- Create: internal/ui/tui/logwatch.go\\n- Create: internal/ui/tui/logwatch_test.go\\n\\nAcceptance:\\n- Given a file grows, watcher emits an \\\"output\\\" event\\n- Given no growth, watcher emits nothing\\n- Tests use temp files and a fake clock/ticker\\n- go test ./... passes\",\"acceptance_criteria\":\"- Emits event on file growth\\n- No event when no growth\\n- Deterministic tests\\n- go test ./... passes\",\"status\":\"closed\",\"priority\":2,\"issue_type\":\"task\",\"owner\":\"g.evstratov@gmail.com\",\"created_at\":\"2026-01-19T15:55:27.519065+03:00\",\"created_by\":\"Gennady Evstratov\",\"updated_at\":\"2026-01-19T19:52:41.943967+03:00\",\"closed_at\":\"2026-01-19T19:52:41.943967+03:00\",\"close_reason\":\"Closed\",\"dependencies\":[{\"issue_id\":\"yolo-runner-127.4.5\",\"depends_on_id\":\"yolo-runner-127.4\",\"type\":\"parent-child\",\"created_at\":\"2026-01-19T15:55:27.519738+03:00\",\"created_by\":\"Gennady Evstratov\"}]}\n00022| {\"id\":\"yolo-runner-127.4.6\",\"title\":\"v1.2: Update README for TUI/headless\",\"description\":\"Document the TUI behavior and the --headless flag.\\n\\nFiles:\\n- Modify: README.md\\n\\nAcceptance:\\n- README explains default TUI on TTY\\n- README documents --headless\\n- go test ./... passes\",\"acceptance_criteria\":\"- README documents TUI and --headless\",\"status\":\"in_progress\",\"priority\":3,\"issue_type\":\"task\",\"owner\":\"g.evstratov@gmail.com\",\"created_at\":\"2026-01-19T15:55:27.595872+03:00\",\"created_by\":\"Gennady Evstratov\",\"updated_at\":\"2026-01-19T19:52:46.798437+03:00\",\"dependencies\":[{\"issue_id\":\"yolo-runner-127.4.6\",\"depends_on_id\":\"yolo-runner-127.4\",\"type\":\"parent-child\",\"created_at\":\"2026-01-19T15:55:27.596552+03:00\",\"created_by\":\"Gennady Evstratov\"}]}\n00023| {\"id\":\"yolo-runner-127.4.7\",\"title\":\"v1.2: Detect default root (avoid hardcoded algi-8bt)\",\"description\":\"Fix the Go runner default --root behavior so it does not default to an unrelated project id (algi-8bt).\\n\\nGoal:\\n- If --root is omitted, infer a sensible default for this repo OR fail fast with a clear error.\\n\\nRecommended approach:\\n- If exactly one roadmap root exists (e.g., top-level epic titled \\\"Roadmap\\\"), default to that id.\\n- Otherwise, require --root and print instructions.\\n\\nFiles:\\n- Modify: cmd/yolo-runner/main.go\\n- Modify: cmd/yolo-runner/main_test.go\\n- Modify (if needed): internal/beads/client.go\\n\\nAcceptance:\\n- Given --root is not provided and a unique \\\"Roadmap\\\" epic exists, runner uses that id\\n- Given --root is not provided and no unique default can be inferred, runner exits non-zero with a clear message\\n- Given --root is provided, runner behavior unchanged\\n- go test ./... passes\",\"acceptance_criteria\":\"- Default root is inferred when unique Roadmap epic exists\\n- Otherwise runner fails fast with clear message\\n- Explicit --root still works\\n- go test ./... passes\",\"status\":\"blocked\",\"priority\":1,\"issue_type\":\"task\",\"owner\":\"g.evstratov@gmail.com\",\"created_at\":\"2026-01-19T16:12:48.996251+03:00\",\"created_by\":\"Gennady Evstratov\",\"updated_at\":\"2026-01-19T19:48:09.326593+03:00\",\"dependencies\":[{\"issue_id\":\"yolo-runner-127.4.7\",\"depends_on_id\":\"yolo-runner-127.4\",\"type\":\"parent-child\",\"created_at\":\"2026-01-19T16:12:48.996902+03:00\",\"created_by\":\"Gennady Evstratov\"}]}\n00024| {\"id\":\"yolo-runner-127.4.8\",\"title\":\"v1.2: Diagnose and fail-fast on OpenCode stalls (question/permission/deadlock)\",\"description\":\"Fix the Go runner so it never hangs indefinitely while waiting for OpenCode.\\n\\nPart A: Diagnose why OpenCode stalls\\n- Determine the primary stall mechanism on this machine:\\n  - permission/doom_loop prompt (service=permission asking)\\n  - question prompt (service=question asking)\\n  - provider/network hang with no output\\n- Capture the relevant evidence in runner logs and/or an error message:\\n  - last N lines from ~/.local/share/opencode/log/\\u003clatest\\u003e.log (or equivalent)\\n  - opencode session id (if available)\\n  - last output timestamp/age for runner-logs/opencode/\\u003cissue\\u003e.jsonl\\n\\nPart B: Fail fast + recoverable state\\n- Add a watchdog around the OpenCode subprocess:\\n  - Track output activity by observing runner-logs/opencode/\\u003cissue\\u003e.jsonl growth/mtime\\n  - If no growth for N seconds (configurable, default 600s), kill the OpenCode process group\\n  - Update the bead status to blocked with a short reason that includes the detected stall category and key evidence pointers\\n  - Exit non-zero so the runner does not silently succeed\\n\\nFiles:\\n- Modify: internal/opencode/client.go\\n- Modify: internal/runner/runner.go\\n- Create: internal/opencode/watchdog.go\\n- Create: internal/opencode/watchdog_test.go\\n\\nRules:\\n- Go only\\n\\nAcceptance:\\n- Given OpenCode output does not change for \\u003eN seconds, runner terminates OpenCode and exits with an error\\n- Given the stall looks like a permission/question prompt, runner error message includes that classification and points to the relevant opencode log file\\n- Given the stall looks like no provider output, runner classifies as \\\"no_output\\\" and includes last-output age\\n- Bead is updated to status=blocked with the same classification info\\n- go test ./... passes\",\"acceptance_criteria\":\"- Watchdog kills OpenCode on no-output timeout\\n- Error includes classification a...\n00025| {\"id\":\"yolo-runner-127.4.9\",\"title\":\"v1.1: Align Go runner OpenCode invocation with Python runner\",\"description\":\"The Python beads runner is more reliable than the Go runner because it invokes OpenCode differently:\\n\\n1) Config isolation:\\n- Python sets XDG_CONFIG_HOME to ~/.config/opencode-runner and forces OPENCODE_CONFIG_DIR/OPENCODE_CONFIG/OPENCODE_CONFIG_CONTENT.\\n- Go runner currently leaves configRoot/configDir empty, so OpenCode uses the user global config, which can trigger interactive questions/permissions and hangs.\\n\\n2) Log integrity:\\n- Python redirects only stdout to runner-logs/opencode/\\u003cissue\\u003e.jsonl.\\n- Go runner currently redirects BOTH stdout and stderr into the JSONL file, which can corrupt the JSONL stream and break log-watcher/spinner logic.\\n\\nThis epic aligns Go behavior to match the proven Python behavior, reducing hangs and making watchdog/logging reliable.\",\"acceptance_criteria\":\"- Go runner sets isolated OpenCode config by default (same as Python runner) unless user overrides\\n- Go runner writes OpenCode stdout to runner-logs/opencode/\\u003cissue\\u003e.jsonl and does NOT mix stderr into that file\\n- Changes are covered by unit tests\\n- go test ./... passes\",\"status\":\"open\",\"priority\":0,\"issue_type\":\"epic\",\"owner\":\"g.evstratov@gmail.com\",\"created_at\":\"2026-01-19T18:40:03.684668+03:00\",\"created_by\":\"Gennady Evstratov\",\"updated_at\":\"2026-01-19T18:40:03.684668+03:00\",\"dependencies\":[{\"issue_id\":\"yolo-runner-127.4.9\",\"depends_on_id\":\"yolo-runner-127.4\",\"type\":\"parent-child\",\"created_at\":\"2026-01-19T18:40:03.685391+03:00\",\"created_by\":\"Gennady Evstratov\"}]}\n00026| {\"id\":\"yolo-runner-127.4.9.1\",\"title\":\"Align: Default isolated OpenCode config (XDG_CONFIG_HOME)\",\"description\":\"Make Go runner use the same isolated OpenCode config layout as beads_yolo_runner.py by default.\\n\\nWhy:\\n- Python runner sets XDG_CONFIG_HOME=~/.config/opencode-runner to avoid user global config and avoid interactive permission prompts.\\n- Go runner currently passes empty configRoot/configDir so OpenCode uses global config.\\n\\nWhat:\\n- In cmd/yolo-runner/main.go, set RunOnceOptions.ConfigRoot and ConfigDir defaults to match Python:\\n  - ConfigRoot: $HOME/.config/opencode-runner\\n  - ConfigDir:  $ConfigRoot/opencode\\n- Add flags to override if needed later (optional), but default must be isolated.\\n\\nFiles:\\n- Modify: cmd/yolo-runner/main.go\\n- Modify: cmd/yolo-runner/main_test.go\\n- Modify (if needed): internal/opencode/client.go\\n\\nAcceptance:\\n- Given no explicit config flags, when building env for opencode, then XDG_CONFIG_HOME is set and OPENCODE_CONFIG_DIR/OPENCODE_CONFIG are set\\n- Given no explicit config flags, opencode.json is created if missing\\n- go test ./... passes\",\"acceptance_criteria\":\"- Default ConfigRoot/ConfigDir are set to ~/.config/opencode-runner and ~/.config/opencode-runner/opencode\\n- Env includes XDG_CONFIG_HOME and OPENCODE_CONFIG* vars\\n- opencode.json created if missing\\n- go test ./... passes\",\"status\":\"closed\",\"priority\":0,\"issue_type\":\"task\",\"owner\":\"g.evstratov@gmail.com\",\"created_at\":\"2026-01-19T18:40:25.625097+03:00\",\"created_by\":\"Gennady Evstratov\",\"updated_at\":\"2026-01-19T18:50:58.845195+03:00\",\"closed_at\":\"2026-01-19T18:50:58.845195+03:00\",\"close_reason\":\"Closed\",\"dependencies\":[{\"issue_id\":\"yolo-runner-127.4.9.1\",\"depends_on_id\":\"yolo-runner-127.4.9\",\"type\":\"parent-child\",\"created_at\":\"2026-01-19T18:40:25.625722+03:00\",\"created_by\":\"Gennady Evstratov\"}]}\n00027| {\"id\":\"yolo-runner-127.4.9.2\",\"title\":\"Align: Keep OpenCode JSONL log clean (stderr separate)\",\"description\":\"Ensure runner-logs/opencode/\\u003cissue\\u003e.jsonl remains valid JSONL by not mixing stderr into the file.\\n\\nWhy:\\n- Python runner writes only stdout to the JSONL file.\\n- Go runner currently redirects BOTH stdout and stderr into the same file, which can insert non-JSON lines and corrupt downstream parsing/watchdog logic.\\n\\nWhat:\\n- Change cmd/yolo-runner/exec.go startCommandWithEnv:\\n  - stdout -\\u003e JSONL file (same as today)\\n  - stderr -\\u003e either os.Stderr OR a separate file (recommended: \\u003cissue\\u003e.stderr.log)\\n- Update internal/opencode/watchdog.go classification to use OpenCode service logs for diagnosis, not the mixed JSONL file.\\n\\nFiles:\\n- Modify: cmd/yolo-runner/exec.go\\n- Modify (if needed): internal/opencode/client.go\\n- Add/Modify tests:\\n  - internal/opencode/client_test.go (assert log file contains only what the runner writes)\\n\\nAcceptance:\\n- Given opencode writes to stderr, JSONL file is not polluted (stderr not present)\\n- Given runner executes opencode, JSONL file still exists and has stdout content\\n- go test ./... passes\",\"acceptance_criteria\":\"- stderr is not written into JSONL file\\n- JSONL file still captures stdout\\n- Tests cover the behavior\\n- go test ./... passes\",\"status\":\"closed\",\"priority\":0,\"issue_type\":\"task\",\"owner\":\"g.evstratov@gmail.com\",\"created_at\":\"2026-01-19T18:40:25.710716+03:00\",\"created_by\":\"Gennady Evstratov\",\"updated_at\":\"2026-01-19T18:54:38.72657+03:00\",\"closed_at\":\"2026-01-19T18:54:38.72657+03:00\",\"close_reason\":\"Closed\",\"dependencies\":[{\"issue_id\":\"yolo-runner-127.4.9.2\",\"depends_on_id\":\"yolo-runner-127.4.9\",\"type\":\"parent-child\",\"created_at\":\"2026-01-19T18:40:25.711353+03:00\",\"created_by\":\"Gennady Evstratov\"}]}\n00028| {\"id\":\"yolo-runner-127.4.9.3\",\"title\":\"Align: Document OpenCode config isolation\",\"description\":\"Document in README why the runner uses an isolated OpenCode config dir and where it lives.\\n\\nFiles:\\n- Modify: README.md\\n\\nAcceptance:\\n- README explains XDG_CONFIG_HOME=~/.config/opencode-runner default\\n- README explains how to override (if flags added) or how to inspect config\\n- go test ./... passes\",\"acceptance_criteria\":\"- README documents isolated config location\\n- go test ./... passes\",\"status\":\"closed\",\"priority\":1,\"issue_type\":\"task\",\"owner\":\"g.evstratov@gmail.com\",\"created_at\":\"2026-01-19T18:40:25.789243+03:00\",\"created_by\":\"Gennady Evstratov\",\"updated_at\":\"2026-01-19T18:55:57.533587+03:00\",\"closed_at\":\"2026-01-19T18:55:57.533587+03:00\",\"close_reason\":\"Closed\",\"dependencies\":[{\"issue_id\":\"yolo-runner-127.4.9.3\",\"depends_on_id\":\"yolo-runner-127.4.9\",\"type\":\"parent-child\",\"created_at\":\"2026-01-19T18:40:25.79001+03:00\",\"created_by\":\"Gennady Evstratov\"}]}\n00029| {\"id\":\"yolo-runner-6tt\",\"title\":\"v3: Pluggable VCS\",\"description\":\"Third iteration: decouple runner from git.\\\\n\\\\n- VCS interface for add/status/commit/rev-parse operations\\\\n- Git adapter implements VCS interface\\\\n- Keep behavior parity with v1\\\\n\\\\nNon-goals: changing default VCS (still git by default).\",\"acceptance_criteria\":\"- Given v2 is complete, when v3 lands, then runner core depends only on a VCS interface (no direct git exec)\\n- Given the Git adapter, when wired in, then behavior matches v1 git operations\\n- Given `go test ./...`, when run, then all tests pass\",\"status\":\"open\",\"priority\":4,\"issue_type\":\"epic\",\"owner\":\"g.evstratov@gmail.com\",\"created_at\":\"2026-01-18T21:38:57.907956+03:00\",\"created_by\":\"Gennady Evstratov\",\"updated_at\":\"2026-01-18T21:40:47.182867+03:00\",\"dependencies\":[{\"issue_id\":\"yolo-runner-6tt\",\"depends_on_id\":\"yolo-runner-127\",\"type\":\"parent-child\",\"created_at\":\"2026-01-18T21:57:38.707707+03:00\",\"created_by\":\"Gennady Evstratov\"},{\"issue_id\":\"yolo-runner-6tt\",\"depends_on_id\":\"yolo-runner-7ld\",\"type\":\"blocks\",\"created_at\":\"2026-01-18T21:57:43.412265+03:00\",\"created_by\":\"Gennady Evstratov\"}]}\n00030| {\"id\":\"yolo-runner-6tt.1\",\"title\":\"v3: Define VCS interface\",\"description\":\"Define a VCS interface (add/status/commit/rev-parse) consumed by runner core.\",\"acceptance_criteria\":\"- Given v1 runner needs, when defining VCS interface, then it covers add-all, status-porcelain dirty check, commit with message, and rev-parse HEAD\\n- Given runner core, when refactored, then it imports only the VCS interface\",\"status\":\"open\",\"priority\":2,\"issue_type\":\"task\",\"owner\":\"g.evstratov@gmail.com\",\"created_at\":\"2026-01-18T21:39:41.330328+03:00\",\"created_by\":\"Gennady Evstratov\",\"updated_at\":\"2026-01-18T21:40:47.239631+03:00\",\"dependencies\":[{\"issue_id\":\"yolo-runner-6tt.1\",\"depends_on_id\":\"yolo-runner-6tt\",\"type\":\"parent-child\",\"created_at\":\"2026-01-18T21:39:41.33083+03:00\",\"created_by\":\"Gennady Evstratov\"}]}\n00031| {\"id\":\"yolo-runner-6tt.2\",\"title\":\"v3: Git adapter implements VCS\",\"description\":\"Implement git-backed adapter that satisfies the VCS interface.\",\"acceptance_criteria\":\"- Given a Git repository, when calling the Git adapter methods, then they run the equivalent git CLI commands used in v1\\n- Given unit tests, when run, then they cover dirty detection and commit command construction\",\"status\":\"open\",\"priority\":3,\"issue_type\":\"task\",\"owner\":\"g.evstratov@gmail.com\",\"created_at\":\"2026-01-18T21:39:42.539787+03:00\",\"created_by\":\"Gennady Evstratov\",\"updated_at\":\"2026-01-18T21:40:47.326316+03:00\",\"dependencies\":[{\"issue_id\":\"yolo-runner-6tt.2\",\"depends_on_id\":\"yolo-runner-6tt\",\"type\":\"parent-child\",\"created_at\":\"2026-01-18T21:39:42.540323+03:00\",\"created_by\":\"Gennady Evstratov\"}]}\n00032| {\"id\":\"yolo-runner-6tt.3\",\"title\":\"v3: Runner uses VCS interface\",\"description\":\"Refactor runner orchestration to call VCS interface rather than git adapter directly.\",\"acceptance_criteria\":\"- Given a fake VCS implementation, when runner core is tested, then it can simulate dirty/clean states and assert correct sequencing\\n- Given the codebase, when searching runner core packages, then there are no direct `git` command invocations\",\"status\":\"open\",\"priority\":3,\"issue_type\":\"task\",\"owner\":\"g.evstratov@gmail.com\",\"created_at\":\"2026-01-18T21:39:44.352994+03:00\",\"created_by\":\"Gennady Evstratov\",\"updated_at\":\"2026-01-18T21:40:47.383897+03:00\",\"dependencies\":[{\"issue_id\":\"yolo-runner-6tt.3\",\"depends_on_id\":\"yolo-runner-6tt\",\"type\":\"parent-child\",\"created_at\":\"2026-01-18T21:39:44.353506+03:00\",\"created_by\":\"Gennady Evstratov\"}]}\n00033| {\"id\":\"yolo-runner-7ld\",\"title\":\"v2: Pluggable task tracker + coding agent + progress web UI\",\"description\":\"Second iteration: decouple the runner core from specific integrations.\\\\n\\\\n- Task tracker abstraction (Beads becomes an adapter)\\\\n- Coding agent abstraction (OpenCode becomes an adapter)\\\\n- Add a webserver to display current progress, current task, recent events/logs\\\\n\\\\nNon-goals: VCS abstraction.\",\"acceptance_criteria\":\"- Given v1 runner behavior, when v2 refactor lands, then core runner code depends only on TaskTracker + CodingAgent interfaces (no direct bd/opencode exec)\\n- Given Beads and OpenCode adapters, when wired into the runner, then behavior matches v1 (task selection, status transitions, logging, and end-to-end flow)\\n- Given the web UI is running, when I open it in a browser, then it shows state, active issue (if any), and recent events\\n- Given the codebase, when I run `go test ./...`, then all tests pass\",\"status\":\"open\",\"priority\":3,\"issue_type\":\"epic\",\"owner\":\"g.evstratov@gmail.com\",\"created_at\":\"2026-01-18T21:38:55.911716+03:00\",\"created_by\":\"Gennady Evstratov\",\"updated_at\":\"2026-01-18T21:40:46.895663+03:00\",\"dependencies\":[{\"issue_id\":\"yolo-runner-7ld\",\"depends_on_id\":\"yolo-runner-127\",\"type\":\"parent-child\",\"created_at\":\"2026-01-18T21:57:38.648431+03:00\",\"created_by\":\"Gennady Evstratov\"},{\"issue_id\":\"yolo-runner-7ld\",\"depends_on_id\":\"yolo-runner-r5w\",\"type\":\"blocks\",\"created_at\":\"2026-01-18T21:57:43.34903+03:00\",\"created_by\":\"Gennady Evstratov\"}]}\n00034| {\"id\":\"yolo-runner-7ld.1\",\"title\":\"v2: Define core interfaces\",\"description\":\"Define interfaces for TaskTracker and CodingAgent so runner core stops depending directly on bd/opencode.\",\"acceptance_criteria\":\"- Given the v1 runner features, when defining `TaskTracker` and `CodingAgent`, then the interfaces cover every capability v1 uses (select leaf task, show issue fields, update status, close issue, sync; run agent and capture logs)\\n- Given the runner core package, when building, then it imports only these interfaces (no direct `bd` or `opencode` command construction)\\n- Given `go test ./...`, when run, then tests validate the interface-driven wiring with fakes\",\"status\":\"open\",\"priority\":1,\"issue_type\":\"task\",\"owner\":\"g.evstratov@gmail.com\",\"created_at\":\"2026-01-18T21:39:37.386509+03:00\",\"created_by\":\"Gennady Evstratov\",\"updated_at\":\"2026-01-18T21:40:46.953408+03:00\",\"dependencies\":[{\"issue_id\":\"yolo-runner-7ld.1\",\"depends_on_id\":\"yolo-runner-7ld\",\"type\":\"parent-child\",\"created_at\":\"2026-01-18T21:39:37.387115+03:00\",\"created_by\":\"Gennady Evstratov\"}]}\n00035| {\"id\":\"yolo-runner-7ld.2\",\"title\":\"v2: Beads adapter implements TaskTracker\",\"description\":\"Implement Beads-backed TaskTracker using bd CLI (or direct API later), matching v1 behavior.\",\"acceptance_criteria\":\"- Given a Beads-backed repository, when TaskTracker.SelectNextLeafTask(root) is called, then it returns the same leaf selection as `bd ready --parent \\u003croot\\u003e --json` recursion in v1\\n- Given a bead id, when TaskTracker.GetIssue(id) is called, then it returns title, description, and acceptance criteria as used in the prompt\\n- Given a bead id and status, when TaskTracker.UpdateStatus is called, then it runs the equivalent `bd update \\u003cid\\u003e --status \\u003cstatus\\u003e`\\n- Given a bead id, when TaskTracker.Close is called, then it runs `bd close \\u003cid\\u003e` and verifies closed via `bd show`\\n- Given unit tests, when run, then they cover JSON parsing, empty/invalid outputs, and command errors\",\"status\":\"open\",\"priority\":2,\"issue_type\":\"task\",\"owner\":\"g.evstratov@gmail.com\",\"created_at\":\"2026-01-18T21:39:38.071258+03:00\",\"created_by\":\"Gennady Evstratov\",\"updated_at\":\"2026-01-18T21:40:47.012123+03:00\",\"dependencies\":[{\"issue_id\":\"yolo-runner-7ld.2\",\"depends_on_id\":\"yolo-runner-7ld\",\"type\":\"parent-child\",\"created_at\":\"2026-01-18T21:39:38.071798+03:00\",\"created_by\":\"Gennady Evstratov\"}]}\n00036| {\"id\":\"yolo-runner-7ld.3\",\"title\":\"v2: OpenCode adapter implements CodingAgent\",\"description\":\"Implement OpenCode-backed CodingAgent using opencode CLI, including model forwarding and non-interactive env.\",\"acceptance_criteria\":\"- Given a repo root and prompt, when CodingAgent.Run(prompt, model) is called, then it shells out to OpenCode with `--agent yolo --format json` and optional `--model \\u003cid\\u003e`\\n- Given a log output path, when Run is called, then stdout is captured to that path (overwriting per run)\\n- Given non-interactive requirements, when Run is called, then it sets the same env vars as v1 (CI=true and OPENCODE_DISABLE_* flags)\\n- Given unit tests, when run, then they verify command args and env construction\",\"status\":\"open\",\"priority\":2,\"issue_type\":\"task\",\"owner\":\"g.evstratov@gmail.com\",\"created_at\":\"2026-01-18T21:39:39.108046+03:00\",\"created_by\":\"Gennady Evstratov\",\"updated_at\":\"2026-01-18T21:40:47.069101+03:00\",\"dependencies\":[{\"issue_id\":\"yolo-runner-7ld.3\",\"depends_on_id\":\"yolo-runner-7ld\",\"type\":\"parent-child\",\"created_at\":\"2026-01-18T21:39:39.108599+03:00\",\"created_by\":\"Gennady Evstratov\"}]}\n00037| {\"id\":\"yolo-runner-7ld.4\",\"title\":\"v2: Add progress web server\",\"description\":\"Run an embedded HTTP server that serves a simple status page (and/or JSON endpoints) showing runner progress, current task, and recent events.\",\"acceptance_criteria\":\"- Given the runner process is running, when I request `GET /api/status`, then it returns JSON with at least: state, active_issue_id, active_issue_title, completed_count, last_error (nullable)\\n- Given the runner process is running, when I request `GET /`, then it renders an HTML page showing: current state, active issue, and the last N runner events\\n- Given no auth is configured, when the server is started, then it binds only to localhost by default (v2 local-only)\\n- Given `go test ./...`, when run, then web server handlers are covered by unit tests\",\"status\":\"open\",\"priority\":3,\"issue_type\":\"task\",\"owner\":\"g.evstratov@gmail.com\",\"created_at\":\"2026-01-18T21:39:40.550579+03:00\",\"created_by\":\"Gennady Evstratov\",\"updated_at\":\"2026-01-18T21:40:47.125955+03:00\",\"dependencies\":[{\"issue_id\":\"yolo-runner-7ld.4\",\"depends_on_id\":\"yolo-runner-7ld\",\"type\":\"parent-child\",\"created_at\":\"2026-01-18T21:39:40.551116+03:00\",\"created_by\":\"Gennady Evstratov\"}]}\n00038| {\"id\":\"yolo-runner-r5w\",\"title\":\"v1: Go standalone runner\",\"description\":\"Port current Python beads YOLO runner to Go and ship as a single standalone binary.\\\\n\\\\nIncludes: bd integration via CLI, opencode integration via CLI, git integration via CLI, prompt builder, logging, and basic docs/build.\\\\n\\\\nNon-goals: abstraction layers for task tracker/coding agent/VCS; web UI.\",\"acceptance_criteria\":\"- Given a repo with bd + opencode installed, when I run `go test ./...`, then tests pass\\n- Given a repo with Go installed, when I run `go build -o bin/yolo-runner ./cmd/yolo-runner`, then a runnable binary is produced\\n- Given a configured repo, when I run `bin/yolo-runner --dry-run --repo . --root \\u003cid\\u003e`, then it prints the selected bead id/title and the exact OpenCode command it would run\\n- Given an open leaf bead task, when I run the runner in real mode, then it sets status=in_progress, runs OpenCode, commits any changes, closes the bead, verifies it is closed, and runs `bd sync`\\n- Given OpenCode produces no git changes, when the runner completes, then it updates the bead to status=blocked and writes a blocked entry to runner logs\",\"status\":\"closed\",\"priority\":1,\"issue_type\":\"epic\",\"owner\":\"g.evstratov@gmail.com\",\"created_at\":\"2026-01-18T21:38:24.337708+03:00\",\"created_by\":\"Gennady Evstratov\",\"updated_at\":\"2026-01-19T10:29:11.519927+03:00\",\"closed_at\":\"2026-01-19T10:29:11.519927+03:00\",\"close_reason\":\"Closed\",\"dependencies\":[{\"issue_id\":\"yolo-runner-r5w\",\"depends_on_id\":\"yolo-runner-127\",\"type\":\"parent-child\",\"created_at\":\"2026-01-18T21:57:38.588336+03:00\",\"created_by\":\"Gennady Evstratov\"}]}\n00039| {\"id\":\"yolo-runner-r5w.1\",\"title\":\"v1: Mirror YOLO agent into .opencode/agent\",\"description\":\"Install YOLO agent per-project so opencode can resolve --agent yolo.\\n\\nFiles:\\n- Create: .opencode/agent/yolo.md (copy from yolo.md)\\n\\nRules:\\n- No system-wide install\\n\\nAcceptance:\\n- From repo root, `opencode run \\\"ping\\\" --agent yolo --format json .` does not print agent-not-found\\n- .opencode/agent/yolo.md is tracked in git\",\"acceptance_criteria\":\"- Given the repo has yolo.md, when I create .opencode/agents/yolo.md from it, then the file exists\\n- Given both files exist, when I compare them, then .opencode/agents/yolo.md content matches yolo.md\\n- Given the project directory, when I run `opencode run \\\"ping\\\" --agent yolo --format json \\u003cproject\\u003e`, then it does NOT print \\\"agent \\\"yolo\\\" not found\\\" (agent is resolved)\\n- Given git status, then .opencode/agents/yolo.md is tracked\",\"status\":\"closed\",\"priority\":0,\"issue_type\":\"task\",\"owner\":\"g.evstratov@gmail.com\",\"created_at\":\"2026-01-18T21:45:23.957149+03:00\",\"created_by\":\"Gennady Evstratov\",\"updated_at\":\"2026-01-19T03:05:28.549281+03:00\",\"closed_at\":\"2026-01-18T23:30:30.64448+03:00\",\"close_reason\":\"Closed\",\"dependencies\":[{\"issue_id\":\"yolo-runner-r5w.1\",\"depends_on_id\":\"yolo-runner-r5w.14\",\"type\":\"parent-child\",\"created_at\":\"2026-01-18T21:53:47.710364+03:00\",\"created_by\":\"Gennady Evstratov\"},{\"issue_id\":\"yolo-runner-r5w.1\",\"depends_on_id\":\"yolo-runner-r5w\",\"type\":\"parent-child\",\"created_at\":\"2026-01-18T23:30:38.559587+03:00\",\"created_by\":\"Gennady Evstratov\"}]}\n00040| {\"id\":\"yolo-runner-r5w.10\",\"title\":\"v1: Build artifacts + docs\",\"description\":\"Add build artifacts and docs for the Go runner.\\n\\nFiles:\\n- Create: Makefile\\n- Modify: README.md\\n\\nRules:\\n- Must describe Go build and usage examples\\n\\nAcceptance:\\n- make test runs go test ./...\\n- make build builds bin/yolo-runner\\n- README documents prerequisites (bd/opencode/git/uv) and example invocations including --model and --dry-run\",\"acceptance_criteria\":\"- Given Makefile, when running `make test`, then it runs `go test ./...`\\n- Given Makefile, when running `make build`, then it builds `bin/yolo-runner`\\n- Given README, when reading, then it documents prerequisites (bd/opencode/git) and example commands\\n- Given CI-like environment, when running build/test, then commands succeed\",\"status\":\"closed\",\"priority\":3,\"issue_type\":\"task\",\"owner\":\"g.evstratov@gmail.com\",\"created_at\":\"2026-01-18T21:46:49.745229+03:00\",\"created_by\":\"Gennady Evstratov\",\"updated_at\":\"2026-01-19T03:55:07.189835+03:00\",\"closed_at\":\"2026-01-19T03:55:07.189835+03:00\",\"close_reason\":\"Closed\",\"dependencies\":[{\"issue_id\":\"yolo-runner-r5w.10\",\"depends_on_id\":\"yolo-runner-r5w.2\",\"type\":\"blocks\",\"created_at\":\"2026-01-18T21:50:16.959338+03:00\",\"created_by\":\"Gennady Evstratov\"},{\"issue_id\":\"yolo-runner-r5w.10\",\"depends_on_id\":\"yolo-runner-r5w.7\",\"type\":\"blocks\",\"created_at\":\"2026-01-18T21:50:17.022774+03:00\",\"created_by\":\"Gennady Evstratov\"},{\"issue_id\":\"yolo-runner-r5w.10\",\"depends_on_id\":\"yolo-runner-r5w.18\",\"type\":\"parent-child\",\"created_at\":\"2026-01-18T21:53:48.371544+03:00\",\"created_by\":\"Gennady Evstratov\"},{\"issue_id\":\"yolo-runner-r5w.10\",\"depends_on_id\":\"yolo-runner-r5w\",\"type\":\"parent-child\",\"created_at\":\"2026-01-18T23:30:39.127051+03:00\",\"created_by\":\"Gennady Evstratov\"}]}\n\n(Output truncated at 51200 bytes. Use 'offset' parameter to read beyond line 40)\n</file>","title":".beads/issues.jsonl","metadata":{"preview":"{\"id\":\"yolo-runner-127\",\"title\":\"Roadmap\",\"description\":\"Top-level roadmap for yolo-runner versions. Keeps v1/v2/v3 work separated via parent-child structure.\",\"acceptance_criteria\":\"- Roadmap contains child epics for v1, v2, v3\\n- Running bd ready --parent \\u003croadmap\\u003e shows next version work in order\",\"status\":\"open\",\"priority\":0,\"issue_type\":\"epic\",\"owner\":\"g.evstratov@gmail.com\",\"created_at\":\"2026-01-18T21:57:33.902592+03:00\",\"created_by\":\"Gennady Evstratov\",\"updated_at\":\"2026-01-18T21:57:33.902592+03:00\"}\n{\"id\":\"yolo-runner-127.1\",\"title\":\"v1.2: Runner supports beads molecules\",\"description\":\"Deferred: add beads molecule traversal support to Go runner selection.\\n\\nSelection semantics:\\n- Container issue types: epic, molecule\\n- Container traversable statuses: open OR in_progress\\n- Leaf task selectable statuses: open only\\n\\nNote:\\n- We are prioritizing runner observability (logging/TUI/watchdog) first.\",\"acceptance_criteria\":\"- Given epic-\\u003emolecule-\\u003etask trees, selection traverses molecules like epics\\n- Containers traversed when status is open or in_progress\\n- Leaf tasks selected only when status is open\\n- go test ./... passes\",\"status\":\"open\",\"priority\":3,\"issue_type\":\"epic\",\"owner\":\"g.evstratov@gmail.com\",\"created_at\":\"2026-01-18T23:31:02.344149+03:00\",\"created_by\":\"Gennady Evstratov\",\"updated_at\":\"2026-01-19T16:24:05.18764+03:00\",\"dependencies\":[{\"issue_id\":\"yolo-runner-127.1\",\"depends_on_id\":\"yolo-runner-127\",\"type\":\"parent-child\",\"created_at\":\"2026-01-18T23:31:02.34471+03:00\",\"created_by\":\"Gennady Evstratov\"},{\"issue_id\":\"yolo-runner-127.1\",\"depends_on_id\":\"yolo-runner-127.4\",\"type\":\"blocks\",\"created_at\":\"2026-01-19T16:32:53.969739+03:00\",\"created_by\":\"Gennady Evstratov\"}]}\n{\"id\":\"yolo-runner-127.1.1\",\"title\":\"v1.1: Selection recurses into molecules\",\"description\":\"Update Python runner selection logic so issue_type==molecule is treated like issue_type==epic for recursion.\",\"acceptance_criteria\":\"- Given a root epic whose first open leaf task is under a molecule, when selecting, then it returns the correct task id\\n- Given both epic and molecule containers exist, when selecting, then both are traversed\\n- Given a molecule has no children, when selecting, then it is skipped\\n- Add tests that fail before the change and pass after\",\"status\":\"closed\",\"priority\":1,\"issue_type\":\"task\",\"owner\":\"g.evstratov@gmail.com\",\"created_at\":\"2026-01-18T23:31:08.240732+03:00\",\"created_by\":\"Gennady Evstratov\",\"updated_at\":\"2026-01-19T11:07:58.059975+03:00\",\"closed_at\":\"2026-01-19T11:07:58.059975+03:00\",\"close_reason\":\"Out of scope for v1.1 (Go-only)\",\"dependencies\":[{\"issue_id\":\"yolo-runner-127.1.1\",\"depends_on_id\":\"yolo-runner-127.1\",\"type\":\"parent-child\",\"created_at\":\"2026-01-18T23:31:08.241324+03:00\",\"created_by\":\"Gennady Evstratov\"}]}\n{\"id\":\"yolo-runner-127.1.2\",\"title\":\"v1.1: Go runner selection supports molecules\",\"description\":\"Implement Go selection molecule support.\\n\\nFiles:\\n- Modify: internal/runner/select.go\\n- Modify: internal/runner/select_test.go\\n\\nRules:\\n- Must be Go only (no new Python files)\\n- Do not modify beads_yolo_runner.py in v1.1\\n\\nSelection semantics:\\n- Treat issue_type in {\\\"epic\\\",\\\"molecule\\\"} as container nodes\\n- Recurse into container nodes when container status is open OR in_progress\\n- Leaf tasks are eligible only when status == open\\n\\nAcceptance:\\n- Given epic-\\u003emolecule(open)-\\u003etask(open), selection returns the task id\\n- Given epic-\\u003emolecule(in_progress)-\\u003etask(open), selection returns the task id\\n- Given epic-\\u003emolecule(open, empty)-\\u003etask(open), selection skips empty molecule and returns the task\\n- Leaf tasks are selected only when status=open\\n- go test ./... passes\",\"acceptance_criteria\":\"- Given epic-\\u003emolecule(open)-\\u003etask(open), selection returns the task id\\n- Given epic-\\u003emolecule(in_progress)-\\u003etask(open), selection returns the task id\\n- Given epic-\\u003emolecule(open, empty)-\\u003etask(open), selection skips empty molecule and returns the task\\n- Leaf tasks are selected only when status=open\\n- go test ./... passes\",\"status\":\"open\",\"priority\":1,\"issue_type\":\"task\",\"owner\":\"g.evstratov@gmail.com\",\"created_at\":\"2026-01-18T23:31:10.652593+03:00\",\"created_by\":\"Gennady Evstratov\",\"updated_at\":\"2026-01-19T16:33:14.126492+03:00\",\"dependencies\":[{\"issue_id\":\"yolo-runner-127.1.2\",\"depends_on_id\":\"yolo-runner-127.1\",\"type\":\"parent-child\",\"created_at\":\"2026-01-18T23:31:10.653195+03:00\",\"created_by\":\"Gennady Evstratov\"}]}\n{\"id\":\"yolo-runner-127.1.3\",\"title\":\"v1.1: Document molecule selection semantics\",\"description\":\"Document selection semantics for epic/molecule traversal.\\n\\nFiles:\\n- Modify: README.md\\n\\nAcceptance:\\n- README explains: container types (epic,molecule), traversable statuses (open,in_progress), leaf eligibility (open only)\",\"acceptance_criteria\":\"- README explains: container types (epic,molecule), traversable statuses (open,in_progress), leaf eligibility (open only)\",\"status\":\"open\",\"priority\":2,\"issue_type\":\"task\",\"owner\":\"g.evstratov@gmail.com\",\"created_at\":\"2026-01-19T11:07:58.135303+03:00\",\"created_by\":\"Gennady Evstratov\",\"updated_at\":\"2026-01-19T11:07:58.135303+03:00\",\"dependencies\":[{\"issue_id\":\"yolo-runner-127.1.3\",\"depends_on_id\":\"yolo-runner-127.1\",\"type\":\"parent-child\",\"created_at\":\"2026-01-19T11:07:58.135883+03:00\",\"created_by\":\"Gennady Evstratov\"}]}\n{\"id\":\"yolo-runner-127.2\",\"title\":\"v1.2: Console Progress Output\",\"description\":\"Add human-friendly console output to the Go runner so it is obvious what it is doing and whether it is hung.\\n\\nScope:\\n- Print current task id/title\\n- Print phase transitions (bd, opencode, git, sync)\\n- Show a heartbeat/spinner while OpenCode runs\\n\\nNon-goals:\\n- No TUI, no curses. Plain stdout/stderr only.\",\"acceptance_criteria\":\"- Given the Go runner is executing, it prints which task is being processed and the final outcome (completed/blocked/error)\\n- Given OpenCode is running, the runner prints periodic heartbeat output so it does not look hung\\n- Given git/bd operations run, the runner prints phase messages (commit/sync/close)\\n- go test ./... passes\",\"status\":\"open\",\"priority\":2,\"issue_type\":\"epic\",\"owner\":\"g.evstratov@gmail.com\",\"created_at\":\"2026-01-19T11:20:28.034824+03:00\",\"created_by\":\"Gennady Evstratov\",\"updated_at\":\"2026-01-19T15:54:59.339847+03:00\",\"dependencies\":[{\"issue_id\":\"yolo-runner-127.2\",\"depends_on_id\":\"yolo-runner-127\",\"type\":\"parent-child\",\"created_at\":\"2026-01-19T11:20:28.035498+03:00\",\"created_by\":\"Gennady Evstratov\"},{\"issue_id\":\"yolo-runner-127.2\",\"depends_on_id\":\"yolo-runner-127.1\",\"type\":\"blocks\",\"created_at\":\"2026-01-19T11:20:28.116396+03:00\",\"created_by\":\"Gennady Evstratov\"}]}\n{\"id\":\"yolo-runner-127.2.1\",\"title\":\"v1.2: Print task start/end/result\",\"description\":\"Print minimal lifecycle lines to stdout.\\n\\nBehavior:\\n- Maintain a single \\\"current state\\\" string for the run (e.g. selecting task, bd update, opencode running, git commit, bd sync).\\n- Print at least:\\n  - Start: \\\"Starting \\u003cid\\u003e: \\u003ctitle\\u003e\\\"\\n  - State transitions: \\\"State: \\u003cstate\\u003e\\\" (one line per transition)\\n  - End: \\\"Finished \\u003cid\\u003e: \\u003cresult\\u003e (\\u003celapsed\\u003e)\\\"\\n\\nFiles:\\n- Modify: cmd/yolo-runner/main.go\\n- Modify: internal/runner/runner.go\\n\\nRules:\\n- Go only\\n\\nAcceptance:\\n- Start line includes issue id and title\\n- State transitions print a readable state string\\n- End line includes result and elapsed\\n- No-tasks case prints message and exits 0\\n- go test ./... passes\",\"acceptance_criteria\":\"- Start line includes issue id and title\\n- Prints state string on transitions\\n- End line includes result and elapsed\\n- No-tasks case prints message\\n- go test ./... passes\",\"status\":\"open\",\"priority\":1,\"issue_type\":\"task\",\"owner\":\"g.evstratov@gmail.com\",\"created_at\":\"2026-01-19T11:20:28.196159+03:00\",\"created_by\":\"Gennady Evstratov\",\"updated_at\":\"2026-01-19T15:37:19.423758+03:00\",\"dependencies\":[{\"issue_id\":\"yolo-runner-127.2.1\",\"depends_on_id\":\"yolo-runner-127.2\",\"type\":\"parent-child\",\"created_at\":\"2026-01-19T11:20:28.196994+03:00\",\"created_by\":\"Gennady Evstratov\"}]}\n{\"id\":\"yolo-runner-127.2.2\",\"title\":\"v1.2: Print phase messages for bd/git operations\",\"description\":\"Print clear, Claude-Code-style phase messages and command echoes so users see exactly what is happening.\\n\\nBehavior:\\n- Before each external command, print: \\\"$ \\u003ccommand\\u003e\\\" (single line)\\n- After the command, print: \\\"ok\\\" or \\\"failed\\\" plus exit code and elapsed time\\n- Cover at least:\\n  - bd show/ready/update/close/sync\\n  - opencode run (show the exact command line)\\n  - git status/add/commit/rev-parse\\n  - go test ./... (when invoked by runner, if applicable)\\n\\nFiles:\\n- Modify: internal/runner/runner.go\\n- Modify (if needed): internal/opencode/client.go\\n- Modify (if needed): internal/vcs/git/git.go\\n- Modify (if needed): internal/beads/client.go\\n\\nRules:\\n- Go only\\n\\nAcceptance:\\n- Output contains \\\"$ \\u003ccommand\\u003e\\\" line for each command listed above\\n- Output prints per-command outcome (ok/failed), exit code, and elapsed\\n- On errors, output shows which command failed\\n- go test ./... passes\",\"acceptance_criteria\":\"- Echoes each external command before running\\n- Prints ok/failed + exit code + elapsed\\n- Covers bd/opencode/git commands\\n- go test ./... passes\",\"status\":\"open\",\"priority\":1,\"issue_type\":\"task\",\"owner\":\"g.evstratov@gmail.com\",\"created_at\":\"2026-01-19T11:20:28.277062+03:00\",\"created_by\":\"Gennady Evstratov\",\"updated_at\":\"2026-01-19T15:36:46.121044+03:00\",\"dependencies\":[{\"issue_id\":\"yolo-runner-127.2.2\",\"depends_on_id\":\"yolo-runner-127.2\",\"type\":\"parent-child\",\"created_at\":\"2026-01-19T11:20:28.277627+03:00\",\"created_by\":\"Gennady Evstratov\"}]}\n{\"id\":\"yolo-runner-127.2.3\",\"title\":\"v1.2: OpenCode heartbeat while logs grow\",\"description\":\"While OpenCode runs, print a compact heartbeat/spinner that proves the process is alive.\\n\\nBehavior:\\n- Keep a \\\"current state\\\" string (e.g. \\\"opencode running\\\") and print it alongside the spinner.\\n- Spinner should advance (beat) when new bytes are appended to runner-logs/opencode/\\u003cissue\\u003e.jsonl.\\n- Also print last-output age (seconds) so stalls are obvious.\\n- Must not spam: render on the SAME terminal line using carriage return (CR, \\r). Only print a newline when:\\n  - the state changes, or\\n  - OpenCode finishes, or\\n  - an error occurs.\\n\\nFiles:\\n- Create: internal/ui/progress.go (or similar)\\n- Modify: internal/opencode/client.go (or call-site in internal/runner/runner.go)\\n\\nRules:\\n- Go only\\n\\nAcceptance:\\n- Given OpenCode runs for \\u003e5s, stdout shows spinner output with current state\\n- Spinner advances on new output bytes\\n- Output is updated in-place (CR) rather than printing new lines repeatedly\\n- Shows last-output age seconds to detect hangs\\n- On completion, prints a final newline and \\\"OpenCode finished\\\" line\\n- go test ./... passes\",\"acceptance_criteria\":\"- Spinner prints during opencode execution with current state\\n- Spinner advances on new output bytes\\n- Uses CR to update in-place (no spam)\\n- Shows last-output age seconds to detect hangs\\n- Stops on completion and prints newline\\n- go test ./... passes\",\"status\":\"open\",\"priority\":1,\"issue_type\":\"task\",\"owner\":\"g.evstratov@gmail.com\",\"created_at\":\"2026-01-19T11:20:28.353994+03:00\",\"created_by\":\"Gennady Evstratov\",\"updated_at\":\"2026-01-19T15:40:14.104014+03:00\",\"dependencies\":[{\"issue_id\":\"yolo-runner-127.2.3\",\"depends_on_id\":\"yolo-runner-127.2\",\"type\":\"parent-child\",\"created_at\":\"2026-01-19T11:20:28.354624+03:00\",\"created_by\":\"Gennady Evstratov\"}]}\n{\"id\":\"yolo-runner-127.2.4\",\"title\":\"v1.2: Add tests for console output\",\"description\":\"Add unit tests that assert key output lines are printed.\\n\\nFiles:\\n- Modify: internal/runner/runner_test.go\\n- Modify: cmd/yolo-runner/main_test.go\\n\\nRules:\\n- Go only\\n\\nAcceptance:\\n- Tests cover: start line, end line, and at least one phase line\\n- Tests do not depend on timing; heartbeat should be testable via injected ticker/clock or a stubbed progress reporter\\n- go test ./... passes\",\"acceptance_criteria\":\"- Tests assert lifecycle output\\n- Heartbeat testing is deterministic\\n- go test ./... passes\",\"status\":\"open\",\"priority\":2,\"issue_type\":\"task\",\"owner\":\"g.evstratov@gmail.com\",\"created_at\":\"2026-01-19T11:20:28.431154+03:00\",\"created_by\":\"Gennady Evstratov\",\"updated_at\":\"2026-01-19T11:20:28.431154+03:00\",\"dependencies\":[{\"issue_id\":\"yolo-runner-127.2.4\",\"depends_on_id\":\"yolo-runner-127.2\",\"type\":\"parent-child\",\"created_at\":\"2026-01-19T11:20:28.431791+03:00\",\"created_by\":\"Gennady Evstratov\"}]}\n{\"id\":\"yolo-runner-127.2.5\",\"title\":\"v1.2: Document console output and troubleshooting\",\"description\":\"Document what users should see, and where to look when it appears stuck.\\n\\nFiles:\\n- Modify: README.md\\n\\nAcceptance:\\n- README includes sample output snippet\\n- README includes: how to tail opencode log and how to identify current task\\n- go test ./... passes\",\"acceptance_criteria\":\"- README includes sample output + troubleshooting pointers\",\"status\":\"open\",\"priority\":3,\"issue_type\":\"task\",\"owner\":\"g.evstratov@gmail.com\",\"created_at\":\"2026-01-19T11:20:28.50869+03:00\",\"created_by\":\"Gennady Evstratov\",\"updated_at\":\"2026-01-19T11:20:28.50869+03:00\",\"dependencies\":[{\"issue_id\":\"yolo-runner-127.2.5\",\"depends_on_id\":\"yolo-runner-127.2\",\"type\":\"parent-child\",\"created_at\":\"2026-01-19T11:20:28.509294+03:00\",\"created_by\":\"Gennady Evstratov\"}]}\n{\"id\":\"yolo-runner-127.3\",\"title\":\"v1.2: Init Command + YOLO Agent Guard\",\"description\":\"Add a runner init command that installs the YOLO agent into the project OpenCode configuration, and make the runner refuse to start if the YOLO agent is missing.\\n\\nDesign:\\n- Project-local (no system-wide install)\\n- init overwrites .opencode/agent/yolo.md to match yolo.md (source of truth)\\n- Runner validates agent presence before doing any work\\n\\nNon-goals:\\n- Managing other agents\\n- Editing user global opencode config\",\"acceptance_criteria\":\"- Given .opencode/agent/yolo.md is missing, when running yolo-runner (non-init), then it exits non-zero with a clear message and does not modify beads/git\\n- Given yolo.md exists, when running yolo-runner init, then it creates or overwrites .opencode/agent/yolo.md to match yolo.md\\n- Given init ran, when running yolo-runner, then it proceeds normally (no agent-not-found)\\n- go test ./... passes\",\"status\":\"open\",\"priority\":2,\"issue_type\":\"epic\",\"owner\":\"g.evstratov@gmail.com\",\"created_at\":\"2026-01-19T15:19:49.466284+03:00\",\"created_by\":\"Gennady Evstratov\",\"updated_at\":\"2026-01-19T15:19:49.466284+03:00\",\"dependencies\":[{\"issue_id\":\"yolo-runner-127.3\",\"depends_on_id\":\"yolo-runner-127\",\"type\":\"parent-child\",\"created_at\":\"2026-01-19T15:19:49.468097+03:00\",\"created_by\":\"Gennady Evstratov\"},{\"issue_id\":\"yolo-runner-127.3\",\"depends_on_id\":\"yolo-runner-127.1\",\"type\":\"blocks\",\"created_at\":\"2026-01-19T15:19:49.527131+03:00\",\"created_by\":\"Gennady Evstratov\"}]}\n{\"id\":\"yolo-runner-127.3.1\",\"title\":\"v1.2: Refuse to run if YOLO agent missing\",\"description\":\"Before selecting any beads task, validate the YOLO agent is installed for this repo.\\n\\nFiles:\\n- Modify: cmd/yolo-runner/main.go\\n- Create: internal/opencode/agent.go\\n- Create: internal/opencode/agent_test.go\\n\\nRules:\\n- Go only\\n\\nAcceptance:\\n- If .opencode/agent/yolo.md does not exist, runner exits non-zero and prints a clear message\\n- If agent file exists but does not contain frontmatter key permission: allow, runner exits non-zero and prints guidance to run init\\n- Validation happens before any bd update / git add / opencode run\\n- go test ./... passes\",\"acceptance_criteria\":\"- Missing agent file fails fast with clear message\\n- Missing permission allow fails fast with guidance\\n- Validation runs before any mutations\\n- go test ./... passes\",\"status\":\"open\",\"priority\":1,\"issue_type\":\"task\",\"owner\":\"g.evstratov@gmail.com\",\"created_at\":\"2026-01-19T15:19:49.598338+03:00\",\"created_by\":\"Gennady Evstratov\",\"updated_at\":\"2026-01-19T15:19:49.598338+03:00\",\"dependencies\":[{\"issue_id\":\"yolo-runner-127.3.1\",\"depends_on_id\":\"yolo-runner-127.3\",\"type\":\"parent-child\",\"created_at\":\"2026-01-19T15:19:49.598929+03:00\",\"created_by\":\"Gennady Evstratov\"}]}\n{\"id\":\"yolo-runner-127.3.2\",\"title\":\"v1.2: Add init subcommand to install YOLO agent\",\"description\":\"Add an init command to the Go runner that installs the YOLO agent into the project OpenCode config.\\n\\nCommand:\\n- yolo-runner init\\n\\nBehavior:\\n- Create .opencode/agent/ if needed\\n- Copy yolo.md -\\u003e .opencode/agent/yolo.md\\n- Overwrite existing .opencode/agent/yolo.md to match yolo.md\\n\\nFiles:\\n- Modify: cmd/yolo-runner/main.go\\n- Modify: cmd/yolo-runner/main_test.go\\n- Modify: internal/opencode/agent.go\\n\\nRules:\\n- Go only\\n\\nAcceptance:\\n- Running yolo-runner init creates/overwrites .opencode/agent/yolo.md\\n- After init, yolo-runner run mode no longer errors on missing agent\\n- go test ./... passes\",\"acceptance_criteria\":\"- init creates/overwrites agent file\\n- run mode passes agent validation after init\\n- go test ./... passes\",\"status\":\"open\",\"priority\":1,\"issue_type\":\"task\",\"owner\":\"g.evstratov@gmail.com\",\"created_at\":\"2026-01-19T15:19:49.67363+03:00\",\"created_by\":\"Gennady Evstratov\",\"updated_at\":\"2026-01-19T15:19:49.67363+03:00\",\"dependencies\":[{\"issue_id\":\"yolo-runner-127.3.2\",\"depends_on_id\":\"yolo-runner-127.3\",\"type\":\"parent-child\",\"created_at\":\"2026-01-19T15:19:49.674108+03:00\",\"created_by\":\"Gennady Evstratov\"}]}\n{\"id\":\"yolo-runner-127.3.3\",\"title\":\"v1.2: Document init + agent requirements\",\"description\":\"Document how agent installation works and how to recover when the runner refuses to start.\\n\\nFiles:\\n- Modify: README.md\\n\\nAcceptance:\\n- README documents yolo-runner init\\n- README explains why runner refuses to start if agent missing\\n- README includes troubleshooting steps\\n- go test ./... passes\",\"acceptance_criteria\":\"- README includes init usage and troubleshooting\",\"status\":\"open\",\"priority\":2,\"issue_type\":\"task\",\"owner\":\"g.evstratov@gmail.com\",\"created_at\":\"2026-01-19T15:19:49.747947+03:00\",\"created_by\":\"Gennady Evstratov\",\"updated_at\":\"2026-01-19T15:19:49.747947+03:00\",\"dependencies\":[{\"issue_id\":\"yolo-runner-127.3.3\",\"depends_on_id\":\"yolo-runner-127.3\",\"type\":\"parent-child\",\"created_at\":\"2026-01-19T15:19:49.748579+03:00\",\"created_by\":\"Gennady Evstratov\"}]}\n{\"id\":\"yolo-runner-127.4\",\"title\":\"v1.1: Observability (TUI + watchdog + init/guards)\",\"description\":\"Make the runner robust and observable before adding molecule traversal.\\n\\nIncludes:\\n- Bubble Tea TUI progress UI (TTY by default, with --headless)\\n- Watchdog to detect and fail-fast on OpenCode stalls, with evidence\\n- Init/guards to ensure YOLO agent is installed and permissions allow non-interactive runs\\n- Fix default --root behavior (avoid hardcoded algi-8bt)\\n\\nAll implementation must be Go.\",\"acceptance_criteria\":\"- Runner does not hang indefinitely on OpenCode stalls (watchdog)\\n- Runner has clear progress output (TUI on TTY, --headless for logs)\\n- Runner refuses to start if YOLO agent missing; init installs it\\n- Default root is inferred or runner errors clearly\\n- go test ./... passes\",\"status\":\"open\",\"priority\":1,\"issue_type\":\"epic\",\"owner\":\"g.evstratov@gmail.com\",\"created_at\":\"2026-01-19T15:55:27.038426+03:00\",\"created_by\":\"Gennady Evstratov\",\"updated_at\":\"2026-01-19T16:24:16.935052+03:00\",\"dependencies\":[{\"issue_id\":\"yolo-runner-127.4\",\"depends_on_id\":\"yolo-runner-127\",\"type\":\"parent-child\",\"created_at\":\"2026-01-19T15:55:27.039062+03:00\",\"created_by\":\"Gennady Evstratov\"}]}\n{\"id\":\"yolo-runner-127.4.1\",\"title\":\"v1.2: Add Bubble Tea dependency\",\"description\":\"Add Bubble Tea dependencies and minimal wiring.\\n\\nFiles:\\n- Modify: go.mod\\n- Modify: go.sum\\n\\nAcceptance:\\n- go test ./... passes\\n- Bubble Tea module is added and buildable\",\"acceptance_criteria\":\"- go test ./... passes\\n- Bubble Tea module is added and buildable\",\"status\":\"closed\",\"priority\":1,\"issue_type\":\"task\",\"owner\":\"g.evstratov@gmail.com\",\"created_at\":\"2026-01-19T15:55:27.195836+03:00\",\"created_by\":\"Gennady Evstratov\",\"updated_at\":\"2026-01-19T18:59:10.354843+03:00\",\"closed_at\":\"2026-01-19T18:59:10.354843+03:00\",\"close_reason\":\"Closed\",\"dependencies\":[{\"issue_id\":\"yolo-runner-127.4.1\",\"depends_on_id\":\"yolo-runner-127.4\",\"type\":\"parent-child\",\"created_at\":\"2026-01-19T15:55:27.196499+03:00\",\"created_by\":\"Gennady Evstratov\"}]}\n{\"id\":\"yolo-runner-127.4.2\",\"title\":\"v1.2: TUI model for runner status\",\"description\":\"Implement a Bubble Tea model that renders:\\n- current task (id + title)\\n- current phase/state string\\n- spinner that advances when new output is detected\\n- last-output age seconds\\n\\nFiles:\\n- Create: internal/ui/tui/model.go\\n- Create: internal/ui/tui/model_test.go\\n\\nAcceptance:\\n- Given status updates, view output contains task id/title and phase string\\n- Spinner advances when notified of new output\\n- Tests run without requiring a real TTY\\n- go test ./... passes\",\"acceptance_criteria\":\"- Renders task and phase\\n- Spinner advances on output events\\n- Tests are deterministic and non-TTY\\n- go test ./... passes\",\"status\":\"closed\",\"priority\":1,\"issue_type\":\"task\",\"owner\":\"g.evstratov@gmail.com\",\"created_at\":\"2026-01-19T15:55:27.275855+03:00\",\"created_by\":\"Gennady Evstratov\",\"updated_at\":\"2026-01-19T19:02:37.853373+03:00\",\"closed_at\":\"2026-01-19T19:02:37.853373+03:00\",\"close_reason\":\"Closed\",\"dependencies\":[{\"issue_id\":\"yolo-runner-127.4.2\",\"depends_on_id\":\"yolo-runner-127.4\",\"type\":\"parent-child\",\"created_at\":\"2026-01-19T15:55:27.276643+03:00\",\"created_by\":\"Gennady Evstratov\"}]}\n{\"id\":\"yolo-runner-127.4.3\",\"title\":\"v1.2: Wire runner phases into TUI\",\"description\":\"Plumb runner phase/state updates into the TUI.\\n\\nFiles:\\n- Modify: internal/runner/runner.go\\n- Create: internal/runner/events.go\\n\\nAcceptance:\\n- Runner emits structured events for: selecting task, bd update, opencode start/end, git add/status/commit, bd close/verify, bd sync\\n- TUI displays current phase based on latest event\\n- go test ./... passes\",\"acceptance_criteria\":\"- Runner emits phase events\\n- TUI updates from events\\n- go test ./... passes\",\"status\":\"closed\",\"priority\":1,\"issue_type\":\"task\",\"owner\":\"g.evstratov@gmail.com\",\"created_at\":\"2026-01-19T15:55:27.357111+03:00\",\"created_by\":\"Gennady Evstratov\",\"updated_at\":\"2026-01-19T19:24:34.458796+03:00\",\"closed_at\":\"2026-01-19T19:24:34.458796+03:00\",\"close_reason\":\"Closed\",\"dependencies\":[{\"issue_id\":\"yolo-runner-127.4.3\",\"depends_on_id\":\"yolo-runner-127.4\",\"type\":\"parent-child\",\"created_at\":\"2026-01-19T15:55:27.357695+03:00\",\"created_by\":\"Gennady Evstratov\"}]}\n{\"id\":\"yolo-runner-127.4.4\",\"title\":\"v1.2: Headless mode flag\",\"description\":\"Add CLI flag --headless to force plain output (no Bubble Tea), even when stdout is a TTY.\\n\\nFiles:\\n- Modify: cmd/yolo-runner/main.go\\n- Modify: cmd/yolo-runner/main_test.go\\n\\nAcceptance:\\n- Given stdout is a TTY, default is TUI\\n- Given --headless, runner does not start Bubble Tea\\n- go test ./... passes\",\"acceptance_criteria\":\"- Default TUI on TTY\\n- --headless disables TUI\\n- go test ./... passes\",\"status\":\"closed\",\"priority\":1,\"issue_type\":\"task\",\"owner\":\"g.evstratov@gmail.com\",\"created_at\":\"2026-01-19T15:55:27.438163+03:00\",\"created_by\":\"Gennady Evstratov\",\"updated_at\":\"2026-01-19T19:41:31.309652+03:00\",\"closed_at\":\"2026-01-19T19:41:31.309652+03:00\",\"close_reason\":\"Closed\",\"dependencies\":[{\"issue_id\":\"yolo-runner-127.4.4\",\"depends_on_id\":\"yolo-runner-127.4\",\"type\":\"parent-child\",\"created_at\":\"2026-01-19T15:55:27.438678+03:00\",\"created_by\":\"Gennady Evstratov\"}]}","truncated":true},"time":{"start":1768841662519,"end":1768841662520}},"metadata":{"openai":{"itemId":"fc_08b7c1aa61fa03d901696e61bdcf6081919f93a986d484cbad"}}}}
{"type":"step_finish","timestamp":1768841662626,"sessionID":"ses_428d3a351ffey4Uy5GHqwPlnuM","part":{"id":"prt_bd72dd0940019cmwqHdnWgSG4w","sessionID":"ses_428d3a351ffey4Uy5GHqwPlnuM","messageID":"msg_bd72d4e78001sEEOo7eSqL5MTm","type":"step-finish","reason":"tool-calls","snapshot":"b5cc00d62428a98a45def2d0b2058e0fa8083829","cost":0,"tokens":{"input":184,"output":1507,"reasoning":1472,"cache":{"read":17920,"write":0}}}}
{"type":"step_start","timestamp":1768841663030,"sessionID":"ses_428d3a351ffey4Uy5GHqwPlnuM","part":{"id":"prt_bd72dd236001pohvHvdAIK5Y0O","sessionID":"ses_428d3a351ffey4Uy5GHqwPlnuM","messageID":"msg_bd72dd0b3001F4wCYVJquw6GlT","type":"step-start","snapshot":"5a3fe438e03f96bb89c5551922b5a04bdd1ba22a"}}
{"type":"text","timestamp":1768841699450,"sessionID":"ses_428d3a351ffey4Uy5GHqwPlnuM","part":{"id":"prt_bd72e55af0019Tj2a3qC96Ij4W","sessionID":"ses_428d3a351ffey4Uy5GHqwPlnuM","messageID":"msg_bd72dd0b3001F4wCYVJquw6GlT","type":"text","text":"Updated the README run section to document the default TUI behavior on a TTY and the `--headless` flag, and added a README coverage test to enforce it in `build_docs_test.go`.\n\nTests: `go test ./...`\n\nCommit: `15b85be` (includes `README.md` and `build_docs_test.go`; note it also captured `.beads/issues.jsonl` from the runner state).\n\nWorking tree still has runner logs: `runner-logs/beads_yolo_runner.jsonl`, `runner-logs/opencode/yolo-runner-127.4.6.jsonl`.\n\nNext steps (optional):\n1) Revert `.beads/issues.jsonl` from the commit.\n2) Clean up `runner-logs/` changes.","time":{"start":1768841699449,"end":1768841699449},"metadata":{"openai":{"itemId":"msg_05a0d3aeb1ff505e01696e61e09b40819182958d3113f5077c"}}}}
{"type":"step_finish","timestamp":1768841699514,"sessionID":"ses_428d3a351ffey4Uy5GHqwPlnuM","part":{"id":"prt_bd72e60ac0018Zov62ICXuoMzi","sessionID":"ses_428d3a351ffey4Uy5GHqwPlnuM","messageID":"msg_bd72dd0b3001F4wCYVJquw6GlT","type":"step-finish","reason":"stop","snapshot":"5cc8fa1c801622ad3dcc67510360efe2df96827b","cost":0,"tokens":{"input":15966,"output":1634,"reasoning":1472,"cache":{"read":17024,"write":0}}}}
